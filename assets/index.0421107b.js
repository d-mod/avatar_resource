var _e=Object.defineProperty,Se=Object.defineProperties;var Ee=Object.getOwnPropertyDescriptors;var re=Object.getOwnPropertySymbols;var Me=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable;var ue=(e,a,s)=>a in e?_e(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s,J=(e,a)=>{for(var s in a||(a={}))Me.call(a,s)&&ue(e,s,a[s]);if(re)for(var s of re(a))Be.call(a,s)&&ue(e,s,a[s]);return e},Z=(e,a)=>Se(e,Ee(a));import{d as V,r as w,a as T,w as W,l as pe,c as x,b as n,e as ve,f as je,u as Qe,g as de,h as Ue,i as Le,j as h,k as N,o as he,m as Ve,n as Ge,p as ze,q as Oe,s as R,t as ne,v as Te,x as Ne,F as Ye,y as se,z as me,A as Fe,B as Pe,C as z,D as X,R as $e,E as ee,G as Ae,H as Je,T as ye,I as te,J as Ze,K as We,L as Xe}from"./vendor.3cf97b8e.js";const He=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function s(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerpolicy&&(c.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?c.credentials="include":l.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(l){if(l.ep)return;l.ep=!0;const c=s(l);fetch(l.href,c)}};He();!location.hostname.endsWith("localhost")&&!location.hostname.endsWith("gitee.io")&&(location.href="//davatar.gitee.io");var ae="data:image/png;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAyAAD/4QMpaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjAtYzA2MCA2MS4xMzQ3NzcsIDIwMTAvMDIvMTItMTc6MzI6MDAgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpDN0EzNkRCRDdGRkIxMUUyODRDOEVCRjk0QjI1RkQ3NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpDN0EzNkRCRTdGRkIxMUUyODRDOEVCRjk0QjI1RkQ3NyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkM3QTM2REJCN0ZGQjExRTI4NEM4RUJGOTRCMjVGRDc3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkM3QTM2REJDN0ZGQjExRTI4NEM4RUJGOTRCMjVGRDc3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQACAYGBgYGCAYGCAwIBwgMDgoICAoOEA0NDg0NEBEMDg0NDgwRDxITFBMSDxgYGhoYGCMiIiIjJycnJycnJycnJwEJCAgJCgkLCQkLDgsNCw4RDg4ODhETDQ0ODQ0TGBEPDw8PERgWFxQUFBcWGhoYGBoaISEgISEnJycnJycnJycn/8AAEQgAHAAcAwEiAAIRAQMRAf/EAHoAAQADAQAAAAAAAAAAAAAAAAUCBgcDAQEAAwAAAAAAAAAAAAAAAAAAAQIDEAAABAMGBAUDBQEAAAAAAAABEQIDEgQFACExExQGQSIVFmFxgTIHQmMmUaHBQ5MXEQACAAYDAQAAAAAAAAAAAAABAgARMWESIkFRAyH/2gAMAwEAAhEDEQA/AKJujdFe67UZeXqE3LMS83MMtobmHgASdXEtSozFQqvvG7ALRprfyJV2FTVJerU/LgPM6y5NLQacUgpKhCK/ALE7gWK6/VQEwOdmTFQc17zgksAuAfK27/F+7q1ueWk6VRKdK0ujUVLKJ19a1OrdbhUnLaQCUEtxSRUKxHxvO2Pn5eeCzRSZCZIn9jR3bJtjU8xhrle3RLvqlpuqVFh9oYVsuzEyhQKD6VpUsFBa2d11fsTqGqd1vVNLqM1wj0h5kEcMUHLh4kduHyxuakbr3QEzQwBxhhhMsqaKEH1IUtQrSFwkADCAjePkVhjR/wA/yYni6yZwIy4tL7T9xlw/ixvLzyTRanjjEwV2k2xp3eCqyKBq9RAQ5gmn/AwzFmXiVr38W7g2zRJepp3FUZyRF9bIywSbsw2CwQlYLjCWEMDDGxu7+0urOZutzIlxabTmUa8rP/rzMovZwKPnsD+IGqLqsXGPTH+/G1kY4rNTS0Q6jI7Ct4JBKoyQKcBjK4CD9S4WZ5u0SIT6n44aXzw9cLQT2gYQ9Ux46UvU+Fr9+Ido/VpI/s5WXk/76jUep/asZjNdTW3UFUSbYUv3H//Z",ge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACRSURBVEhL7daxDYAgEIXhmwQ1DsACNo7gANYu4Riu42yYh7mrKO9RACZ/I8YvwWBOcF33lp73pAbDsBBCvrEfa5qXyTW8E++OMf6o6gxMUxRWBpmYBsPA0gOMBuheJyDOR2mRkR380iKjTra0/W/Y/pYO0LMBumdgrSHKQPwBmKhObAZiEGahitkgrNN3jUREPjyCoXkD2eO/AAAAAElFTkSuQmCC",Ke=V({name:"canvas-box",props:{width:{type:Number,default:()=>300},height:{type:Number,default:()=>200},images:{type:Array,default:()=>[]},canvasClass:{type:[String,Array],default:""},scale:{type:Number,default:()=>1}},setup(e){const a=w(),s=T({x:0,y:0}),o=T({x:0,y:0}),l=w(!1);W([()=>e.images,()=>e.scale],pe.exports.debounce(y,10));const c=w(!1),f=w(0);async function r(g,k){return new Promise(Q=>{if(k!=f.value){Q(void 0);return}const B=new Image;B.onload=()=>{Q(B)},B.onerror=()=>{Q(void 0)},B.src=g})}async function y(){var g;c.value=!0;try{const k=e.width,Q=e.height,B=new Date().getTime();f.value=B;let S=Array.from(e.images);S.sort((p,M)=>p.z-M.z);const i=S.map(async p=>{var M,C,O,j;return p.img||(p.img=await r(p.url,B),p.width=(C=(M=p.img)==null?void 0:M.width)!=null?C:p.width,p.height=(j=(O=p.img)==null?void 0:O.height)!=null?j:p.height),p});S=await Promise.all(i);let I=e.width,G=e.height,E=0,Y=0;for(let p of S)I=Math.min(p.x,I),G=Math.min(p.y,G),E=Math.max(p.width,E),Y=Math.max(p.height,Y);S=S.map(p=>Z(J({},p),{x:p.x-I,y:p.y-G}));let K=Math.round((e.width-E)/2+o.x),P=Math.round((e.height-Y)/2+o.y);const F=(g=a.value)==null?void 0:g.getContext("2d");if(F){const p=e.scale;F.clearRect(0,0,k,Q),S.forEach(M=>{const C=Math.round((M.x+K)*p);let O=Math.round((M.y+P)*p);const j=Math.round(M.width*p),$=Math.round(M.height*p);M.img&&F.drawImage(M.img,C,O,j,$)})}}finally{c.value=!1}}function b({x:g,y:k}){l.value=!0,s.x=g,s.y=k}function m(){l.value=!1}function A(g){l.value&&(o.x+=(g.clientX-s.x)/e.scale,o.y+=(g.clientY-s.y)/e.scale,s.x=g.clientX,s.y=g.clientY,y())}const _=x(()=>({width:e.width?`${e.width}px`:"0",height:e.height?`${e.height}px`:"0"}));return()=>n("div",{class:"relative"},[n("div",{class:"bg-white h-full w-full z-99 absolute items-center justify-center".concat(" ").concat(c.value?"flex":"hidden")},[n("div",{class:"text-blue-300 loading"},null)]),n("canvas",{ref:a,style:_.value,class:[e.canvasClass].concat("cursor-move","select-none"),width:e.width,height:e.height,onMouseleave:m,onMousedown:b,onMouseup:m,onMousemove:A},null)])}});const qe=ve("collocation",{state(){return{list:[],display_list:[],collocation_types:[]}},actions:{async fetchData(){let{list:e=[],types:a=[]}=await fetch("/api/collocation.json").then(s=>s.json());this.list=e,this.collocation_types=a},async load(e){let{profession:a,keyword:s,size:o,page:l,type:c,year:f}=e;const r=s.split(" ");let y=this.list.filter(b=>!(!r.every(m=>{var A,_;return((A=b.name)==null?void 0:A.includes(m))||((_=b.description)==null?void 0:_.includes(m))})||a&&b.profession!==a||c&&b.type!==c||f&&b.year!==f));y=y.slice(0,(l+1)*o),this.display_list=y}},getters:{years(){let e=new Date().getFullYear(),a=new Array(e-2007);for(let s=0;s<a.length;s++)a[s]=e-s;return a}}}),et=["hair","cap","face","neck","coat","skin","belt","pants","shoes"],le=ve("dressing",{state(){return{profession_list:[],profession:void 0,dresses:{},icons:{}}},getters:{profession_name(){var e,a;return(a=(e=this.profession)==null?void 0:e.name)!=null?a:"swordman"}},actions:{async loadProfession(){if(this.profession_list.length===0){let e=await fetch("/api/profession.json").then(a=>a.json());return this.profession_list=e,this.profession=e[0],e}return[]},async setProfession(e){this.profession=e,localStorage.setItem("last-profession",e.name);let a=[];for(let s of et)a.push(this.getDressList(s)),a.push(this.getIcon(s));await Promise.all(a)},setProfessionName(e){this.profession=this.profession_list.find(a=>a.name==e)},async getIcon(e){let a=this.profession_name;if(!this.icons[a]||!this.icons[a][e]){let s=await fetch(`/icon/${a}/${e}.json`).then(o=>o.json());this.icons[a]=this.icons[a]||{},this.icons[a][e]=s}return this.icons[a][e]},async getDressList(e){let a=this.profession_name;if(!this.dresses[a]||!this.dresses[a][e]){let s=await fetch(`/api/${a}/${e}.json`).then(o=>o.json());s=s.map(o=>Object.assign(o,{profession:a,part:e,icon:`/icon/${a}/${e}/${o.code}.png`})),this.dresses[a]=this.dresses[a]||{},this.dresses[a][e]=s}return this.dresses[a][e]},async getDress(e){let a=[];for(let s in e){if(e[s]==="-1")continue;let l=(await this.getDressList(s)).find(c=>c.code===e[s]);l&&a.push(l)}return a}}});var tt=je(),at=V({props:{collapsed:{type:Boolean,default:()=>!0}},setup(e,{emit:a}){const s=le(),o=Qe(e,"collapsed",a),l=de(o);function c(m){return{width:"26px",height:"26px",margin:"0 11px",backgroundImage:'url("/icon/profession.png")',backgroundPositionX:`-${m*26}px`,backgroundPositionY:`${0}px`}}const f=Ue({selector:"html",attribute:"data-theme",valueLight:"light",valueDark:"dark"}),r=de(f),y=Le("(max-width: 640px)");function b(m){return()=>{a("apply",m),gtag("event","select-profession",{label:m.label,name:m.name}),y.value&&l(!0)}}return()=>n("div",{class:"h-full fixed left-0 top-0 content float-left  text-color duration-300 shadow z-999".concat(" ").concat(o.value?"w-12":"sm:w-64 w-full")},[n("div",{class:"h-8 text-center"},[n(h("apt-button"),{title:o.value?"\u5C55\u5F00":"\u6536\u8D77",class:"font-bold text-xl w-full duration-300 select-none",onClick:l},{default:()=>[n("div",{class:o.value?"i-mdi-add":"i-mdi-minus"},null)]})]),N(s.profession_list,(m,A)=>n("div",{title:m.label,key:A,onClick:b(m),class:["prof-item odd:flex-row-reverse text-sm flex-1 h-12 flex items-center cursor-pointer select-none  duration-200 relative "].concat(m==s.profession?"active":"")},[n("div",{class:"absolute",style:c(A)},null),n("div",{class:["flex-1","text-center"].concat(o.value?"hidden":"")},[m.label])])),n("div",null,[n(h("apt-button"),{title:f.value?"\u6D45\u8272\u6A21\u5F0F":"\u6DF1\u8272\u6A21\u5F0F",onClick:r,class:"font-bold text-xl  w-full duration-300 select-none"},{default:()=>[n("div",{class:["w-6 h-6 bg-center bg-no-repeat text-color"].concat(f.value?"i-mdi-outline-dark-mode":"i-mdi-outline-light-mode")},null)]})])])}});var oe=(e,a)=>{const s=e.__vccOpts||e;for(const[o,l]of a)s[o]=l;return s},nt=oe(at,[["__scopeId","data-v-98fc21e8"]]),st=V((e,{emit:a})=>{const s=le(),o=qe(),l={width:156,height:240},c={width:`${l.width}px`,height:`${l.height}px`};he(async()=>{await o.fetchData()});const f=w(!1),r=T({profession:"swordman",year:0,keyword:"",type:!1,page:0,size:16}),y=T({page:0,totalPages:1});async function b(){f.value=!0,await o.load(r),y.page=0,f.value=!1}const m=w(!1);function A(i){const{profession:I,code:G}=i;gtag("event","select_template",i);let E=ne.parse(G);a("import",{name:I,query:E}),window.scrollTo(0,0)}function _({profession:i,code:I}){a("export",`${i}?${I}`)}const{x:g,y:k}=Ve();async function Q(){const i=Math.floor(k.value/l.height)+1;if(i>y.page*2){m.value=!0,y.page=i/2;let I=Object.assign({},r,y);await o.load(I),m.value=!1}await Oe(()=>k.value+=l.height)}function B(i){return{backgroundImage:`url("/cover/${i.id}.png")`}}W(()=>s.profession,i=>{(i==null?void 0:i.name)&&(r.profession=i.name)}),Ge(b);const S=w();return ze(S,i=>{const I=i[0];if(I){const G=I.contentRect.width,E=Math.floor(G/156)*2;r.size=E}}),()=>n("div",null,[n("div",{class:"flex flex-wrap h-auto px-4 pt-2"},[n("div",{class:"select-col justify-center sm:justify-start"},[n(h("apt-input"),{placeholder:"\u641C\u7D22",onKeyup_native:pe.exports.debounce(b,20),"action-icon":"search",class:"search-input",modelValue:r.keyword,"onUpdate:modelValue":i=>r.keyword=i},null)]),n("div",{class:"select-col"},[n(h("apt-indices"),{size:"small",modelValue:r.profession,"onUpdate:modelValue":i=>r.profession=i},{default:()=>[n(h("apt-option"),{value:!1,label:"\u5168\u90E8"},null),N(s.profession_list,i=>n(h("apt-option"),{key:i.name,label:i.label,value:i.name},null))]})]),n("div",{class:"select-col"},[n(h("apt-indices"),{size:"small",modelValue:r.type,"onUpdate:modelValue":i=>r.type=i},{default:()=>[n(h("apt-option"),{value:!1,label:"\u5168\u90E8"},null),N(o.collocation_types,i=>n(h("apt-option"),{"text-color":"black",key:i.name,label:i.label,value:i.name},null))]})]),n("div",{class:"select-col"},[n(h("apt-indices"),{size:"small",modelValue:r.year,"onUpdate:modelValue":i=>r.year=i},{default:()=>[n(h("apt-option"),{value:0,label:"\u5168\u90E8"},null),N(o.years,i=>n(h("apt-option"),{key:i,label:`${i}\u5E74`,value:i},null))]})])]),n("div",{onTouchend:Q,ref:S,class:"flex flex-wrap duration-300 collocations"},[N(o.display_list,i=>n("div",{title:i.description,class:"py-3 duration-400 item relative box-border",style:c},[n("div",{style:B(i),class:"bg-bottom bg-no-repeat w-full layer absolute"},null),n("div",{class:"h-full w-full z-1 relative"},[n("div",{class:"name",textContent:i.name},null),n("div",{class:"info"},[n("span",null,[R("\u4F5C\u8005:")]),n("span",{class:"text-blue-400",textContent:i.author},null)]),n("div",{class:"info"},[n("span",null,[R("\u70ED\u5EA6:")]),n("span",{textContent:i.amount},null)]),n(h("apt-button"),{class:"border-1",onClick:()=>A(i),type:"primary",textContent:i.custom?"\u4E0B\u8F7D":"\u5BFC\u5165"},null),!i.custom&&n(h("apt-button"),{class:"border-1",onClick:()=>_(i),type:"primary"},{default:()=>[R("\u5BFC\u51FA")]})])]))]),n(h("apt-button"),{class:"text-xl w-full",onClick:Q,"full-width":!0},{default:()=>[n("div",{class:"text-2xl i-mdi-baseline-keyboard-arrow-down"},null)]})])});var lt=oe(st,[["__scopeId","data-v-7688dc4e"]]),ot=V({name:"app",components:{CanvasBox:Ke,Profession:nt,Collocation:lt},setup(){const e=T({part:"skin"}),a=T({width:300,height:300,scale:100}),s=le(),o=x(()=>{var t;return((t=s.profession)==null?void 0:t.weapons)||[]});x(()=>o.value.find(t=>t.name==e.weapon));const l=x(()=>{let t=e.part;return t=="weapon"&&!!e.weapon&&(t=e.weapon),t}),c=x(()=>a.scale/100),f=w(""),r=w([]),y=w(""),b=x(()=>{var d;const t=(d=s.profession)==null?void 0:d.name;let u=[];if(t)for(let v in A){let D=A[v].images||[],U=v;U==="weapon"&&(U=e.weapon),!!U&&(D.forEach(ce=>ce.url=`/image/${t}/${U}/${ce.name}`),u.push(...D))}return u}),m=w([]),A=T({hair:L("hair"),cap:L("cap"),face:L("face"),neck:L("neck"),coat:L("coat"),skin:L("skin"),belt:L("belt"),pants:L("pants"),shoes:L("shoes")});function _(t){return!!t&&parseInt(t)>-1}function g(t){if(t&&t.target){const u=t.target;u.src=ae}}function k(t){return`${t.name||""}[${t.code}]`}function Q(t){let u=`${t.part}/${t.code}.png`,d=r.value.findIndex(v=>v.name===u);if(d>-1){let v=r.value[d];return{backgroundImage:`url("/icon/${t.profession}/${t.part}.png")`,backgroundPositionX:`${v.x}px`,backgroundPositionY:`${v.y}px`}}return{backgroundImage:`url("${ae}") `}}function B(t){let u=40,d=40,v=28+40;return u+=Math.floor(t/3)*v,d+=t%3*v,{top:`${u}px`,left:`${d}px`,backgroundImage:`url(${ge})`}}const S=x(()=>f.value.split(" ").filter(t=>t.length>0)),i=x(()=>{let t=[];return S.value.length===0?t=Array.from(m.value):t=m.value.filter(I),t.sort((u,d)=>parseInt(u.code)-parseInt(d.code)),t});function I(t){const u=S.value;for(let d of u)if(!(t.name&&t.name.match(d)||t.code.match(d))&&!(t.name&&t.name.indexOf(d)>-1)&&!(t.code.indexOf(d)>-1))return!1;return!0}function G(t){let{code:u,part:d}=t;return!!d&&u===A[d].code}async function E({name:t,query:u={}}={}){for(let D in A)u[D]||p(D);if(!t)return;s.setProfessionName(t),await Y();const v=(await s.getDress(u)).map(async D=>await P(D));await Promise.all(v)}async function Y(){let t=l.value;const[u,d]=await Promise.all([s.getIcon(t),s.getDressList(t)]);r.value=u,m.value=d}async function K(t){e.part!==t&&(e.part=t,await Y())}async function P(t){let{code:u,part:d}=t;const v=parseInt(u);if(isNaN(v)||v===-1){p(d);return}(!d||!A[d])&&(d="weapon"),A[d]=Object.assign({title:A[d].title},t)}function F(t){return u=>{u.preventDefault(),p(t)}}function p(t){A[t]=L(t)}async function M(){await E(s.profession)}const C=T({imports:!1,exports:!1}),O=w(!1),j=w(""),$=/.*\?(.*=&)*/;async function De(){try{let t=await navigator.clipboard.readText();t.match($)&&(j.value=t)}finally{C.imports=!0}}async function Re(){C.imports=!1;const t=j.value;if(t.match($)){let u=t.indexOf("?");u<0&&(u=t.length-1);let d=t.substring(0,u),v=t.substring(u+1),D=ne.parse(v);await E({name:d,query:D})}}async function ie(t){if(!t){let u=s.profession_name,d={};for(let v in A){let{code:D}=A[v];if(_(D)){let U=(v==="weapon"?y.value:v)||v;d[U]=D}}t=`${u}?${ne.stringify(d)}`}j.value=t,O.value=!0;try{await navigator.clipboard.writeText(t)}catch{O.value=!1}finally{C.exports=!0}}he(async()=>{const t=Te(),u=Ne(),d=await s.loadProfession();if(d&&d.length>0){let{path:v}=t,D=t.query;v=v.replace("/","");let U={};v&&v.length>0?(U={name:v,query:D},await u.replace("/")):s.profession&&(U=s.profession),await E(U)}});const q=w(!0);return()=>n(Ye,null,[n(h("profession"),{collapsed:q.value,"onUpdate:collapsed":t=>q.value=t,onApply:E},null),n("div",{class:["flex justify-center duration-300 pr-4"].concat(q.value?"pl-16":"sm:pl-64")},[n("div",{class:"flex flex-wrap my-4 mx-2 max-w-400 justify-center items-start overflow-x-hidden "},[n("div",{class:"flex flex-wrap"},[n("div",{class:"flex-wrap flex card justify-center items-center "},[n("div",{class:"flex h-20 w-full items-center justify-center"},[n(h("apt-button"),{class:"border-1",title:"\u91CD\u7F6E",onClick:M,size:"normal",color:"gray"},{default:()=>[n("div",{class:"text-xl i-mdi-refresh"},null)]}),n(h("apt-button"),{class:"border-1",onClick:De,size:"normal",type:"primary"},{default:()=>[R("\u5BFC\u5165")]}),n(h("apt-button"),{class:"border-1",onClick:()=>ie(),type:"info",size:"normal"},{default:()=>[R("\u5BFC\u51FA")]})]),n(h("canvas-box"),{height:a.height,width:a.width,images:b.value,scale:c.value},null),n("div",{class:"h-60 w-60 part relative"},[N(A,(t,u,d)=>{var v;return n("div",{onClick:()=>K(u),onContextmenu:F(u),key:u,style:B(d),class:["item","text-xs","absolute","w-8","h-8","border-2","border-transparent","box-border"].concat(u===e.part?"active":"")},[_(t.code)?n("img",{class:"flex h-7 m-0 w-7 icon",src:(v=t.icon)!=null?v:ae,title:k(t),onError:g,draggable:"false"},null):n("div",{class:"icon",title:t.title},[t.title])])})]),n("div",{class:"h-auto justify-end overflow-hidden sm:h-93"},[n("div",{class:"flex h-12 items-center justify-center"},[n(h("apt-input"),{placeholder:"\u641C\u7D22",modelValue:f.value,"onUpdate:modelValue":t=>f.value=t},null)]),n("div",{class:"flex flex-wrap h-auto w-75 select overflow-y-auto justify-start sm:h-75 "},[n("div",{onClick:()=>p(e.part),class:"icon default"},null),N(i.value,t=>n("div",{class:{active:G(t),icon:!0},key:t.hash,style:Q(t),title:k(t),onClick:()=>P(t)},null))])])]),n(h("collocation"),{class:"mt-4 card",onExport:ie,onImport:E},null)]),n("div",{class:"flex flex-wrap mt-4 text-center text-sm text-color mb-12 items-center"},[n("p",{class:"m-0 w-full"},[n("a",{class:"text-blue-400",href:"//gitee.com/davatar/davatar"},[R("DAvatar\xA0Ver\xA02.0.0")])]),n("p",{class:"m-0 w-full"},[R("Copyright\xA0\xA9\xA02017-present\xA0"),n("a",{class:"text-blue-400",href:"//gitee.com/apateat"},[R("Apateat")]),R(".")]),n("p",{class:"m-0 w-full"},[R("All\xA0rights\xA0reserved.")])])])]),n(h("apt-dialog"),{class:"h-30 p-4 w-80 relative",onYes:()=>C.exports=!1,"cancel-button":!1,visible:C.exports,"onUpdate:visible":t=>C.exports=t},{default:()=>[n("div",{class:"h-8 w-full leading-8"},[R("\u5BFC\u51FA")]),se(n("div",{class:"text-red-400"},[R("\u590D\u5236\u5931\u8D25,\u8BF7\u81EA\u884C\u590D\u5236\u5230\u526A\u8D34\u677F")]),[[me,!O.value]]),n("div",{class:" text-blue-300 break-all select-all "},[j.value])]}),n(h("apt-dialog"),{onYes:Re,onCancel:()=>C.imports=!1,class:"p-4 w-80",visible:C.imports,"onUpdate:visible":t=>C.imports=t},{default:()=>[n("div",{class:"h-8 w-full leading-8"},[R("\u5BFC\u5165")]),n(h("apt-input"),{multiline:!0,modelValue:j.value,"onUpdate:modelValue":t=>j.value=t,placeholder:"\u8BF7\u8F93\u5165\u4EE3\u7801",class:"h-auto w-full word-wrap"},null)]})])}});const it={hair:"\u5934\u90E8",cap:"\u5E3D\u5B50",face:"\u8138\u90E8",neck:"\u80F8\u90E8",coat:"\u4E0A\u8863",skin:"\u76AE\u80A4",belt:"\u8170\u5E26",pants:"\u4E0B\u88C5",shoes:"\u978B"};function L(e){return{name:"",part:e,icon:ge,images:[],code:"-1",title:it[e]}}var fe=oe(ot,[["__scopeId","data-v-0411c41b"]]),ct=Fe({history:Pe("/"),routes:[{name:"index",path:"/",component:fe},{name:"character",path:"/:id",component:fe}]});var we=V({name:"i-button",props:{disabled:{type:Boolean,default:!1},small:{type:Boolean,default:!1},to:{type:String,default:null}},setup(e,{slots:a}){return()=>z(e.to?$e:"button",{to:e.to,class:{"i-button":!0,disabled:e.disabled,small:e.small}},X(a,"default"))}});const be=Symbol("[i-selection]active"),xe=Symbol("[i-selection]init"),ke=Symbol("[i-selection]active-class"),Ie={modelValue:{type:[String,Number,Object,Boolean]},activeClass:{type:String}};function Ce(e,a){const s=x({set(l){a.emit("update:modelValue",l==null?void 0:l.value)},get(){return o.find(l=>l.value==e.modelValue)}});ee(be,s),ee(ke,x(()=>e.activeClass));const o=[];return ee(xe,l=>{o.push(l),(s.value==null||s.value==null)&&(s.value=l.value)}),{active:s}}var rt=V({name:"i-select",props:Z(J({},Ie),{disabled:{type:Boolean,default:!1},width:{type:Number,default:120},emptyLabel:{type:String}}),setup(e,a){const{active:s}=Ce(e,a),o=w(!1),l=w();W(o,y);function c(){o.value=!o.value&&!b.value}const f=w({x:0,y:0,w:0}),r=x(()=>({left:`${f.value.x}px`,top:`${f.value.y}px`,width:`${f.value.w}px`,visibility:o.value?void 0:"hidden"}));function y(){if(l.value){const{width:m,height:A,left:_,top:g}=l.value.getBoundingClientRect();f.value={w:m,x:_,y:g+A+4}}}const b=x(()=>!!e.disabled);return Ae(l,()=>o.value=!1),window.addEventListener("resize",y),window.addEventListener("scroll",y),Je(()=>{window.removeEventListener("resize",y),window.removeEventListener("scroll",y)}),function(){function A(){var g,k;return z("div",{class:{"i-select-trigger":!0,disabled:e.disabled},ref:l},[z("span",{class:"i-select-label"},(k=(g=s==null?void 0:s.value)==null?void 0:g.key)!=null?k:e.emptyLabel),z("div",{class:"i-select-down-icon"})])}const _=()=>{const{slots:g}=a;return z(ye,{to:"body"},[z("div",{class:"i-select-dropdown",style:r.value},X(g,"default"))])};return z("div",{class:"i-select",onClick:c,style:{width:e.width==0?0:`${e.width}px`}},[A(),_()])}}});const ut={value:{type:[Object,String,Number,Boolean]},label:{type:[Function,String]}};function dt(e){const a=te(be),s=te(xe),o=x(()=>{var r;return e.value==((r=a==null?void 0:a.value)==null?void 0:r.value)}),l=x(()=>{let r=e.label;return typeof r=="function"&&(r=r(e.value)),r!=null?r:e.value}),c=x(()=>({key:l.value,value:e.value}));s&&s(c.value),W(c,()=>{o.value&&a&&(a.value=c.value)});const f=te(ke);return{active:a,isActive:o,current:c,label:l,activeClass:f}}var ft=V({name:"i-option",props:ut,setup(e){const{active:a,activeClass:s,isActive:o,current:l,label:c}=dt(e);return()=>{var f;return z("span",{class:{"i-option":!0,[(f=s==null?void 0:s.value)!=null?f:"active"]:o.value},onClick(){a&&(a.value=l.value)}},c.value)}}});var pt=V({name:"i-indices",props:Z(J({},Ie),{label:{type:String}}),setup(e,a){Ce(e,a);const{slots:s}=a;return()=>{const o=[];return e.label&&o.push(n("span",{class:"i-indices-label",textContent:e.label},null)),o.push(X(s,"default")),n("div",{class:"i-indices"},[o])}}});var vt=V({name:"i-input",props:{modelValue:{type:String},placeholder:{type:String},multiline:{type:Boolean,default:!1}},setup(e,{emit:a}){const s=x({get(){return e.modelValue},set(l){a("update:modelValue",l)}});function o(l){const c=l.target;c&&(s.value=c.textContent)}return()=>e.multiline?n("div",{contenteditable:!0,class:"i-input",placeholder:e.placeholder,textContent:s.value,onInput:o},null):se(n("input",{class:"i-input",placeholder:e.placeholder,"onUpdate:modelValue":l=>s.value=l},null),[[Ze,s.value]])}});function ht(e="body",a){return z(ye,{to:e},a)}var mt=V({name:"i-dialog",components:{IButton:we},props:{visible:{type:Boolean,default:!1},class:{type:String},yesButton:{type:[String,Boolean],default:"\u786E\u5B9A"},cancelButton:{type:[String,Boolean],default:"\u53D6\u6D88"}},emits:["close","yes","cancel","update:visible"],setup(e,{emit:a,slots:s}){const o=w();Ae(o,()=>a("update:visible",!1));function l(){a("yes")}function c(){a("cancel")}function f(){if(e.yesButton||e.cancelButton){const r=[];return e.cancelButton&&r.push(n(h("i-button"),{onClick:c},{default:()=>[e.cancelButton]})),e.yesButton&&r.push(n(h("i-button"),{class:"bg-blue-300 text-white",onClick:l},{default:()=>[e.yesButton]})),n("div",{class:"flex mt-8 justify-end"},[r])}}return()=>ht("body",[se(n("div",{class:["bounce-in-down bg-#00000066 w-full h-full fixed top-0 left-0 z-999 flex justify-center items-center duration-300  "].concat(e.visible?" ":"hidden")},[n("div",{ref:o,class:["bg-white h-auto shadow-sm round-1 p-4",e.class]},[n("div",{class:"w-full"},[n("div",{class:"h-auto"},[R(" "),X(s,"default")]),f()])])]),[[me,e.visible]])])}}),At={install(e){e.component("apt-button",we),e.component("apt-select",rt),e.component("apt-option",ft),e.component("apt-indices",pt),e.component("apt-input",vt),e.component("apt-dialog",mt)}};const H=We(Xe);H.use(ct);H.use(tt);H.use(At);H.mount("#app");
