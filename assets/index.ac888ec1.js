var Te=Object.defineProperty,Ge=Object.defineProperties;var Ne=Object.getOwnPropertyDescriptors;var fe=Object.getOwnPropertySymbols;var Ye=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable;var pe=(e,t,l)=>t in e?Te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,ae=(e,t)=>{for(var l in t||(t={}))Ye.call(t,l)&&pe(e,l,t[l]);if(fe)for(var l of fe(t))Fe.call(t,l)&&pe(e,l,t[l]);return e},ne=(e,t)=>Ge(e,Ne(t));import{d as V,r as w,a as G,b as he,c as A,e as n,f as ye,g as ze,u as ie,h as ve,i as Pe,j as $e,k as g,l as N,w as W,v as K,o as ge,m as Je,n as q,p as Ze,q as k,s as We,t as oe,x as Xe,y as He,z as Ke,A as qe,F as et,B as tt,C as at,D as Ae,E as P,R as nt,G as F,H as we,I as be,T as xe,J as ke,K as z,L as lt,M as st,N as ot,O as it}from"./vendor.9fe85502.js";const rt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function l(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=l(s);fetch(s.href,r)}};rt();window.addEventListener("contextmenu",e=>e.preventDefault());window.addEventListener("beforeinstallprompt",function(e){setTimeout(function(){e.prompt(),e.userChoice.then(()=>{console.log("davatar installed.")})},2e3)},{once:!0});var le="data:image/png;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAyAAD/4QMpaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjAtYzA2MCA2MS4xMzQ3NzcsIDIwMTAvMDIvMTItMTc6MzI6MDAgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpDN0EzNkRCRDdGRkIxMUUyODRDOEVCRjk0QjI1RkQ3NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpDN0EzNkRCRTdGRkIxMUUyODRDOEVCRjk0QjI1RkQ3NyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkM3QTM2REJCN0ZGQjExRTI4NEM4RUJGOTRCMjVGRDc3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkM3QTM2REJDN0ZGQjExRTI4NEM4RUJGOTRCMjVGRDc3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQACAYGBgYGCAYGCAwIBwgMDgoICAoOEA0NDg0NEBEMDg0NDgwRDxITFBMSDxgYGhoYGCMiIiIjJycnJycnJycnJwEJCAgJCgkLCQkLDgsNCw4RDg4ODhETDQ0ODQ0TGBEPDw8PERgWFxQUFBcWGhoYGBoaISEgISEnJycnJycnJycn/8AAEQgAHAAcAwEiAAIRAQMRAf/EAHoAAQADAQAAAAAAAAAAAAAAAAUCBgcDAQEAAwAAAAAAAAAAAAAAAAAAAQIDEAAABAMGBAUDBQEAAAAAAAABEQIDEgQFACExExQGQSIVFmFxgTIHQmMmUaHBQ5MXEQACAAYDAQAAAAAAAAAAAAABAgARMWESIkFRAyH/2gAMAwEAAhEDEQA/AKJujdFe67UZeXqE3LMS83MMtobmHgASdXEtSozFQqvvG7ALRprfyJV2FTVJerU/LgPM6y5NLQacUgpKhCK/ALE7gWK6/VQEwOdmTFQc17zgksAuAfK27/F+7q1ueWk6VRKdK0ujUVLKJ19a1OrdbhUnLaQCUEtxSRUKxHxvO2Pn5eeCzRSZCZIn9jR3bJtjU8xhrle3RLvqlpuqVFh9oYVsuzEyhQKD6VpUsFBa2d11fsTqGqd1vVNLqM1wj0h5kEcMUHLh4kduHyxuakbr3QEzQwBxhhhMsqaKEH1IUtQrSFwkADCAjePkVhjR/wA/yYni6yZwIy4tL7T9xlw/ixvLzyTRanjjEwV2k2xp3eCqyKBq9RAQ5gmn/AwzFmXiVr38W7g2zRJepp3FUZyRF9bIywSbsw2CwQlYLjCWEMDDGxu7+0urOZutzIlxabTmUa8rP/rzMovZwKPnsD+IGqLqsXGPTH+/G1kY4rNTS0Q6jI7Ct4JBKoyQKcBjK4CD9S4WZ5u0SIT6n44aXzw9cLQT2gYQ9Ux46UvU+Fr9+Ido/VpI/s5WXk/76jUep/asZjNdTW3UFUSbYUv3H//Z",Ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACRSURBVEhL7daxDYAgEIXhmwQ1DsACNo7gANYu4Riu42yYh7mrKO9RACZ/I8YvwWBOcF33lp73pAbDsBBCvrEfa5qXyTW8E++OMf6o6gxMUxRWBpmYBsPA0gOMBuheJyDOR2mRkR380iKjTra0/W/Y/pYO0LMBumdgrSHKQPwBmKhObAZiEGahitkgrNN3jUREPjyCoXkD2eO/AAAAAElFTkSuQmCC",ct=V({name:"canvas-box",props:{width:{type:Number,default:()=>300},height:{type:Number,default:()=>200},images:{type:Array,default:()=>[]},canvasClass:{type:[String,Array],default:""},scale:{type:Number,default:()=>1}},setup(e){const t=w(),l=G({x:0,y:0}),o=G({x:0,y:0}),s=w(!1);he([()=>e.images,()=>e.scale],f,{debounce:10});const r=w(!1),i=w(0);async function m(x,E){return new Promise(U=>{if(E!=i.value){U(void 0);return}const M=new Image;M.onload=()=>{U(M)},M.onerror=()=>{U(void 0)},M.src=x})}async function f(){var x;r.value=!0;try{const E=e.width,U=e.height,M=new Date().getTime();i.value=M;let I=Array.from(e.images);I.sort((h,D)=>h.z-D.z);const c=I.map(async h=>{var D,B,T,j;return h.img||(h.img=await m(h.url,M),h.width=(B=(D=h.img)==null?void 0:D.width)!=null?B:h.width,h.height=(j=(T=h.img)==null?void 0:T.height)!=null?j:h.height),h});I=await Promise.all(c);let R=e.width,L=e.height,S=0,Y=0;for(let h of I)R=Math.min(h.x,R),L=Math.min(h.y,L),S=Math.max(h.width,S),Y=Math.max(h.height,Y);I=I.map(h=>ne(ae({},h),{x:h.x-R,y:h.y-L}));let te=Math.round((e.width-S)/2+o.x),X=Math.round((e.height-Y)/2+o.y);const $=(x=t.value)==null?void 0:x.getContext("2d");if($){const h=e.scale;$.clearRect(0,0,E,U),I.forEach(D=>{const B=Math.round((D.x+te)*h);let T=Math.round((D.y+X)*h);const j=Math.round(D.width*h),H=Math.round(D.height*h);D.img&&$.drawImage(D.img,B,T,j,H)})}}finally{r.value=!1}}function b({x,y:E}){s.value=!0,l.x=x,l.y=E}function u(){s.value=!1}function d(x){s.value&&(o.x+=(x.clientX-l.x)/e.scale,o.y+=(x.clientY-l.y)/e.scale,l.x=x.clientX,l.y=x.clientY,f())}const C=A(()=>({width:e.width?`${e.width}px`:"0",height:e.height?`${e.height}px`:"0"}));return()=>n("div",{class:"relative"},[n("div",{class:"bg-light h-full w-full z-99 absolute items-center justify-center".concat(" ").concat(r.value?"flex":"hidden")},[n("div",{class:"text-primary loading"},null)]),n("canvas",{ref:t,style:C.value,class:[e.canvasClass].concat("cursor-move","select-none"),width:e.width,height:e.height,onMouseleave:u,onMousedown:b,onMouseup:u,onMousemove:d},null)])}});const ut=ye("collocation",{state(){return{list:[],display_list:[],collocation_types:[]}},actions:{async fetchData(){let{list:e=[],types:t=[]}=await fetch("/api/collocation.json").then(l=>l.json());this.list=e,this.collocation_types=t},async load(e){let{profession:t,keyword:l,size:o,page:s,type:r,year:i}=e;const m=l.split(" ");let f=this.list.filter(b=>!(!m.every(u=>{var d,C;return((d=b.name)==null?void 0:d.includes(u))||((C=b.description)==null?void 0:C.includes(u))})||t&&b.profession!==t||r&&b.type!==r||i&&b.year!==i));f=f.slice(0,(s+1)*o),this.display_list=f}},getters:{years(){let e=new Date().getFullYear(),t=new Array(e-2007);for(let l=0;l<t.length;l++)t[l]=e-l;return t}}}),dt=["hair","cap","face","neck","coat","skin","belt","pants","shoes"],re=ye("dressing",{state(){return{profession_list:[],profession:void 0,dresses:{},icons:{}}},getters:{profession_name(){var e,t;return(t=(e=this.profession)==null?void 0:e.name)!=null?t:"swordman"}},actions:{async loadProfession(){if(this.profession_list.length===0){let e=await fetch("/api/profession.json").then(t=>t.json());return this.profession_list=e,this.profession=e[0],e}return[]},async setProfession(e){this.profession=e,localStorage.setItem("last-profession",e.name);let t=[];for(let l of dt)t.push(this.getDressList(l)),t.push(this.getIcon(l));await Promise.all(t)},setProfessionName(e){this.profession=this.profession_list.find(t=>t.name==e)},async getIcon(e){let t=this.profession_name;if(!this.icons[t]||!this.icons[t][e]){let l=await fetch(`/icon/${t}/${e}.json`).then(o=>o.json());this.icons[t]=this.icons[t]||{},this.icons[t][e]=l}return this.icons[t][e]},async getDressList(e){let t=this.profession_name;if(!this.dresses[t]||!this.dresses[t][e]){let l=await fetch(`/api/${t}/${e}.json`).then(o=>o.json());l=l.map(o=>Object.assign(o,{profession:t,part:e,icon:`/icon/${t}/${e}/${o.code}.png`})),this.dresses[t]=this.dresses[t]||{},this.dresses[t][e]=l}return this.dresses[t][e]},async getDress(e){let t=[];for(let l in e){if(e[l]==="-1")continue;let s=(await this.getDressList(l)).find(r=>r.code===e[l]);s&&t.push(s)}return t}}});var ft=ze(),pt=V({props:{collapsed:{type:Boolean,default:()=>!0}},setup(e,{emit:t}){const l=re(),o=ie(e,"collapsed",t),s=ve(o);function r(u){return{width:"26px",height:"26px",backgroundImage:'url("/icon/profession.png")',backgroundPositionX:`-${u*26}px`,backgroundPositionY:`${0}px`}}const i=Pe({selector:"html",attribute:"data-theme",valueLight:"light",valueDark:"dark"}),m=ve(i),f=$e("(max-width: 640px)");function b(u){t("apply",u),gtag("event","select-profession",{label:u.label,name:u.name}),f.value&&s(!0)}return()=>n(g("apt-selection"),{value:l.profession,onChange:b,"item-class":"odd:flex-row-reverse text-sm flex-1 h-12 flex items-center cursor-pointer select-none  duration-200 relative","active-class":"text-primary bg-primary bg-opacity-36",class:["h-full fixed left-0 top-0 bg-light float-left  text-dark duration-300 shadow z-999"].concat(o.value?"w-12":"sm:w-64 w-full")},{default:()=>[n("div",{class:"h-8 text-center"},[n(g("apt-button"),{title:o.value?"\u5C55\u5F00":"\u6536\u8D77",class:"font-bold text-xl w-full duration-300 select-none",onClick:s},{default:()=>[n("div",{class:o.value?"i-mdi-add":"i-mdi-baseline-minus"},null)]})]),N(l.profession_list,(u,d)=>n(g("apt-item"),{title:u.label,key:d,value:u,class:["hover:text-primary hover:bg-primary hover:bg-opacity-12"].concat(o.value?"justify-center":"px-8")},{default:()=>[n("div",{class:!o.value&&"absolute",style:r(d)},null),W(n("div",{class:"flex-1 text-center"},[u.label]),[[K,!o.value]])]})),n("div",null,[n(g("apt-button"),{title:i.value?"\u6D45\u8272\u6A21\u5F0F":"\u6DF1\u8272\u6A21\u5F0F",onClick:m,class:"font-bold text-xl  w-full duration-300 select-none"},{default:()=>[n("div",{class:["w-6 h-6 bg-center bg-no-repeat text-dark"].concat(i.value?"i-mdi-outline-dark-mode":"i-mdi-outline-light-mode")},null)]})])]})}}),vt=V((e,{emit:t})=>{const l=re(),o=ut(),s={width:150,height:232},r={width:`${s.width}px`,height:`${s.height}px`};ge(async()=>{await o.fetchData()});const i=w(!1),m=G({profession:"swordman",year:0,keyword:"",type:!1,page:0,size:16}),f=G({page:0,totalPages:1});async function b(){i.value=!0,await o.load(m),f.page=0,i.value=!1}const u=w(!1);function d(c){const{profession:R,code:L}=c;gtag("event","select_template",c);let S=oe.parse(L);t("import",{name:R,query:S}),window.scrollTo(0,0)}function C({profession:c,code:R}){t("export",`${c}?${R}`)}const{x,y:E}=Je();async function U(){const c=Math.floor(E.value/s.height)+1;if(c>f.page*2){u.value=!0,f.page=c/2;let R=Object.assign({},m,f);await o.load(R),u.value=!1}await We(()=>E.value+=s.height)}function M(c){return{backgroundImage:`url("/cover/${c.id}.png")`,height:"calc(100% - 48px)"}}q(()=>l.profession,c=>{c!=null&&c.name&&(m.profession=c.name)}),he(m,b,{debounce:100,immediate:!0});const I=w();return Ze(I,c=>{const R=c[0];if(R){const L=R.contentRect.width,S=Math.floor(L/156)*2;m.size=S}}),()=>n("div",null,[n("div",{class:"flex flex-wrap h-auto px-4 pt-2"},[n("div",{class:" mx-auto my-1 sm:mx-0"},[n(g("apt-input"),{placeholder:"\u641C\u7D22",onKeyup_native:b,"action-icon":"search",class:"rounded-1 h-8 w-60",modelValue:m.keyword,"onUpdate:modelValue":c=>m.keyword=c},null)]),n(g("apt-indices"),{class:"my-1",modelValue:m.profession,"onUpdate:modelValue":c=>m.profession=c},{default:()=>[n(g("apt-item"),{value:0,label:"\u5168\u90E8"},null),N(l.profession_list,c=>n(g("apt-item"),{key:c.name,label:c.label,value:c.name},null))]}),n(g("apt-indices"),{class:"my-1",modelValue:m.type,"onUpdate:modelValue":c=>m.type=c},{default:()=>[n(g("apt-item"),{value:0,label:"\u5168\u90E8"},null),N(o.collocation_types,c=>n(g("apt-item"),{"text-dark":"black",key:c.name,label:c.label,value:c.name},null))]}),n(g("apt-indices"),{class:"my-1",modelValue:m.year,"onUpdate:modelValue":c=>m.year=c},{default:()=>[n(g("apt-item"),{value:0},{default:()=>[k("\u5168\u90E8")]}),N(o.years,c=>n(g("apt-item"),{key:c,label:`${c}\u5E74`,value:c},null))]})]),n("div",{onTouchend:U,ref:I,class:"flex flex-wrap duration-300 collocations"},[N(o.display_list,c=>n("div",{title:c.description,class:"py-3 duration-400 item relative box-border",style:r},[n("div",{style:M(c),class:"bg-bottom bg-no-repeat w-full top-0 z-0 absolute"},null),n("div",{class:"h-full w-full z-1 relative"},[n("div",{class:"h-6 text-xs text-center text-dark w-full bottom-3 leading-6 name overflow-hidden whitespace-nowrap",textContent:c.name},null),n("div",{class:"text-sm text-white text-center w-full block invisible info"},[n("div",null,[n("span",null,[k("\u4F5C\u8005:")]),n("span",{class:"text-primary",textContent:c.author},null)]),n("div",null,[n("span",null,[k("\u70ED\u5EA6:")]),n("span",{textContent:c.amount},null)]),n("div",{class:"flex flex-col mx-auto items-center"},[n(g("apt-button"),{class:" bg-white mt-4  hover:bg-opacity-78 hover:text-white",onClick:()=>d(c),textContent:c.custom?"\u4E0B\u8F7D":"\u5BFC\u5165"},null),!c.custom&&n(g("apt-button"),{class:" bg-white mt-4  hover:bg-opacity-78 hover:text-white",onClick:()=>C(c)},{default:()=>[k("\u5BFC\u51FA")]})])])])]))]),n(g("apt-button"),{class:"text-xl w-full duration-200 hover:bg-primary hover:bg-opacity-24",onClick:U,"full-width":!0},{default:()=>[n("div",{class:"text-2xl i-mdi-baseline-keyboard-arrow-down"},null)]})])});var ce=(e,t)=>{const l=e.__vccOpts||e;for(const[o,s]of t)l[o]=s;return l},mt=ce(vt,[["__scopeId","data-v-b376d1ec"]]);function ht(e={}){const{immediate:t=!1,onNeedRefresh:l,onOfflineReady:o,onRegistered:s,onRegisterError:r}=e;let i;const m=async(f=!0)=>{};return"serviceWorker"in navigator&&(i=new Xe("/sw.js",{scope:"/",type:"classic"}),i.addEventListener("activated",f=>{f.isUpdate?window.location.reload():o==null||o()}),i.register({immediate:t}).then(f=>{s==null||s(f)}).catch(f=>{r==null||r(f)})),m}function yt(e={}){const{immediate:t=!0,onNeedRefresh:l,onOfflineReady:o,onRegistered:s,onRegisterError:r}=e,i=w(!1),m=w(!1);return{updateServiceWorker:ht({immediate:t,onNeedRefresh(){i.value=!0,l==null||l()},onOfflineReady(){m.value=!0,o==null||o()},onRegistered:s,onRegisterError:r}),offlineReady:m,needRefresh:i}}var gt=V({name:"app",components:{CanvasBox:ct,Profession:pt,Collocation:mt},setup(){const e=G({part:"skin"}),t=G({width:300,height:300,scale:100}),l=re(),o=A(()=>{var a;return((a=l.profession)==null?void 0:a.weapons)||[]});A(()=>o.value.find(a=>a.name==e.weapon));const s=A(()=>{let a=e.part;return a=="weapon"&&!!e.weapon&&(a=e.weapon),a}),r=A(()=>t.scale/100),i=w(""),m=w([]),f=w(""),b=A(()=>{var v;const a=(v=l.profession)==null?void 0:v.name;let p=[];if(a)for(let y in d){let _=d[y].images||[],Q=y;Q==="weapon"&&(Q=e.weapon),Q&&(_.forEach(de=>de.url=`/image/${a}/${Q}/${de.name}`),p.push(..._))}return p}),u=w([]),d=G({hair:O("hair"),cap:O("cap"),face:O("face"),neck:O("neck"),coat:O("coat"),skin:O("skin"),belt:O("belt"),pants:O("pants"),shoes:O("shoes")});function C(a){return!!a&&parseInt(a)>-1}function x(a){if(a&&a.target){const p=a.target;p.src=le}}function E(a){return`${a.name||""}[${a.code}]`}function U(a){let p=`${a.part}/${a.code}.png`,v=m.value.findIndex(y=>y.name===p);if(v>-1){let y=m.value[v];return{backgroundImage:`url("/icon/${a.profession}/${a.part}.png")`,backgroundPositionX:`${y.x}px`,backgroundPositionY:`${y.y}px`}}return{backgroundImage:`url("${le}") `}}function M(a){let p=40,v=40,y=28+40;return p+=Math.floor(a/3)*y,v+=a%3*y,{top:`${p}px`,left:`${v}px`,backgroundImage:`url(${Ce})`}}const I=A(()=>i.value.split(" ").filter(a=>a.length>0)),c=A(()=>{let a=[];return I.value.length===0?a=Array.from(u.value):a=u.value.filter(R),a.sort((p,v)=>parseInt(p.code)-parseInt(v.code)),a});function R(a){const p=I.value;for(let v of p)if(!(a.name&&a.name.match(v)||a.code.match(v))&&!(a.name&&a.name.indexOf(v)>-1)&&!(a.code.indexOf(v)>-1))return!1;return!0}function L(a){let{code:p,part:v}=a;return!!v&&p===d[v].code}async function S({name:a,query:p={}}={}){for(let _ in d)p[_]||h(_);if(!a)return;l.setProfessionName(a),await Y();const y=(await l.getDress(p)).map(async _=>await X(_));await Promise.all(y)}async function Y(){let a=s.value;const[p,v]=await Promise.all([l.getIcon(a),l.getDressList(a)]);m.value=p,u.value=v}async function te(a){e.part!==a&&(e.part=a,await Y())}async function X(a){let{code:p,part:v}=a;const y=parseInt(p);if(isNaN(y)||y===-1){h(v);return}(!v||!d[v])&&(v="weapon"),d[v]=Object.assign({title:d[v].title},a)}function $(a){return p=>{p.preventDefault(),h(a)}}function h(a){d[a]=O(a)}async function D(){await S(l.profession)}const B=G({imports:!1,exports:!1}),T=w(!1),j=w(""),H=/.*\?(.*=&)*/;async function Ue(){try{let a=await navigator.clipboard.readText();a.match(H)&&(j.value=a)}finally{B.imports=!0}}async function Qe(){const a=j.value;if(a.match(H)){let p=a.indexOf("?");p<0&&(p=a.length-1);let v=a.substring(0,p),y=a.substring(p+1),_=oe.parse(y);await S({name:v,query:_})}}async function ue(a){if(!a){let p=l.profession_name,v={};for(let y in d){let{code:_}=d[y];if(C(_)){let Q=(y==="weapon"?f.value:y)||y;v[Q]=_}}a=`${p}?${oe.stringify(v)}`}j.value=a,T.value=!0;try{await navigator.clipboard.writeText(a)}catch{T.value=!1}finally{B.exports=!0}}ge(async()=>{const a=He(),p=Ke(),v=await l.loadProfession();if(v&&v.length>0){let{path:y}=a,_=a.query;y=y.replace("/","");let Q={};y&&y.length>0?(Q={name:y,query:_},await p.replace("/")):l.profession&&(Q=l.profession),await S(Q)}});const J=w(!0),{isSwiping:Oe,direction:Le}=qe(document.documentElement);return q(Oe,a=>{if(a)switch(Le.value){case"LEFT":J.value=!0;return;case"RIGHT":J.value=!1;return}}),yt({immediate:!0,onRegistered(a){a&&setInterval(async()=>{console.log("Checking for sw update"),await a.update()},2e4)}}),()=>n(et,null,[n(g("profession"),{collapsed:J.value,"onUpdate:collapsed":a=>J.value=a,onApply:S},null),n("div",{class:["flex justify-center duration-300 pr-4 pt-8"].concat(J.value?"pl-16":"sm:pl-64")},[n("div",{class:"flex flex-wrap max-w-400 justify-center items-start overflow-x-hidden "},[n("div",{class:"flex flex-wrap"},[n("div",{class:"flex-wrap flex card justify-center items-center "},[n("div",{class:"flex h-20 w-full items-center justify-center"},[n("div",{class:"border-primary  flex border-1 rounded-1 overflow-hidden items-center"},[n(g("apt-button"),{class:"border-r-primary cursor-pointer border-r-1 border-0",title:"\u91CD\u7F6E",onClick:D,size:"normal",color:"gray"},{default:()=>[n("div",{class:"text-xl i-mdi-refresh"},null)]}),n(g("apt-button"),{class:"border-r-primary cursor-pointer border-r-1 border-0",title:"\u5BFC\u5165",onClick:Ue,size:"normal"},{default:()=>[k("\u5BFC\u5165")]}),n(g("apt-button"),{class:"cursor-pointer",onClick:()=>ue(),title:"\u5BFC\u51FA",type:"info",size:"normal"},{default:()=>[k("\u5BFC\u51FA")]})])]),n(g("canvas-box"),{height:t.height,width:t.width,images:b.value,scale:r.value},null),n("div",{class:"h-60 w-60 part relative"},[N(d,(a,p,v)=>{var y;return n("div",{onClick:()=>te(p),onContextmenu:$(p),key:p,style:M(v),class:["item","text-xs","absolute","w-8","h-8","border-2","border-transparent","box-border"].concat(p===e.part?"active":"")},[C(a.code)?n("img",{class:"flex h-7 m-0 w-7 icon",src:(y=a.icon)!=null?y:le,title:E(a),onError:x,draggable:"false"},null):n("div",{class:"icon",title:a.title},[a.title])])})]),n("div",{class:"h-auto justify-end overflow-hidden sm:h-93"},[n("div",{class:"flex h-12 items-center justify-center"},[n(g("apt-input"),{placeholder:"\u641C\u7D22",modelValue:i.value,"onUpdate:modelValue":a=>i.value=a},null)]),n("div",{class:"flex flex-wrap h-auto w-75 select overflow-y-auto justify-start sm:h-75 "},[n("div",{onClick:()=>h(e.part),class:"icon default"},null),N(c.value,a=>n("div",{class:{active:L(a),icon:!0},key:a.hash,style:U(a),title:E(a),onClick:()=>X(a)},null))])])]),n(g("collocation"),{class:"mt-4 card",onExport:ue,onImport:S},null)]),n("div",{class:"flex flex-wrap my-8 text-center text-base text-dark items-center"},[n("p",{class:"m-0 w-full"},[n("a",{class:"text-primary",href:"//gitee.com/davatar/davatar"},[k("DAvatar\xA0Ver\xA02.0.0")])]),n("p",{class:"m-0 w-full"},[k("Copyright\xA0\xA9\xA02017-present\xA0"),n("a",{class:"text-primary",href:"//gitee.com/apateat"},[k("Apateat")]),k(".")]),n("p",{class:"m-0 w-full"},[k("All\xA0rights\xA0reserved.")])])])]),n(g("apt-dialog"),{class:"h-30 p-4 w-80 relative","cancel-button":!1,visible:B.exports,"onUpdate:visible":a=>B.exports=a},{default:()=>[n("div",{class:"h-8 text-dark w-full leading-8"},[k("\u5BFC\u51FA")]),W(n("div",{class:"text-red-400"},[k("\u590D\u5236\u5931\u8D25,\u8BF7\u81EA\u884C\u590D\u5236\u5230\u526A\u8D34\u677F")]),[[K,!T.value]]),n("div",{class:" text-primary break-all select-all "},[j.value])]}),n(g("apt-dialog"),{onYes:Qe,class:"p-4 w-80",visible:B.imports,"onUpdate:visible":a=>B.imports=a},{default:()=>[n("div",{class:"h-8 text-dark w-full leading-8"},[k("\u5BFC\u5165")]),n(g("apt-input"),{multiline:!0,modelValue:j.value,"onUpdate:modelValue":a=>j.value=a,placeholder:"\u8BF7\u8F93\u5165\u4EE3\u7801",class:"h-auto w-full word-wrap"},null)]})])}});const At={hair:"\u5934\u90E8",cap:"\u5E3D\u5B50",face:"\u8138\u90E8",neck:"\u80F8\u90E8",coat:"\u4E0A\u8863",skin:"\u76AE\u80A4",belt:"\u8170\u5E26",pants:"\u4E0B\u88C5",shoes:"\u978B"};function O(e){return{name:"",part:e,icon:Ce,images:[],code:"-1",title:At[e]}}var me=ce(gt,[["__scopeId","data-v-4fe3ad8a"]]),wt=tt({history:at("/"),routes:[{name:"index",path:"/",component:me},{name:"character",path:"/:id",component:me}]});var Re=V({name:"i-button",props:{disabled:{type:Boolean,default:!1},small:{type:Boolean,default:!1},to:{type:String,default:null},type:{type:String,default:"normal"}},setup(e,{slots:t}){const l=A(()=>{switch(e.type){case"primary":return"bg-primary text-white hover:bg-opacity-78";case"outline":return"bg-light rounded-sm border-primary border-1 border-soild text-primary hover:bg-primary hover:text-light hover:bg-opacity-78";case"normal":default:return"bg-light rounded-sm text-primary hover:bg-primary hover:bg-opacity-12"}});return()=>Ae(e.to?nt:"button",{to:e.to,class:{"i-button select-none":!0,disabled:e.disabled,small:e.small,[l.value]:!0}},P(t,"default"))}});const Z=[String,Number,Object,Boolean,null],se=[String,Array],_e=Symbol("[i-selection]active"),Ie=Symbol("[i-selection]init"),Se=Symbol("[i-selection]model-value"),De=Symbol("[i-selection]active-class"),Ee=Symbol("[i-selection]item-class"),Me=Symbol("[i-selection]unactive-class"),Be={value:{type:Z,default:()=>null},modelValue:{type:Z,default:()=>null},defaultValue:{type:Z,default:()=>null},activeClass:{type:se},itemClass:{type:se},unactiveClass:{type:se}};function je(e,t){const l=w(),o=A(()=>{var i;return(i=e.value)!=null?i:e.modelValue}),s=A({set(i){t.emit("update:modelValue",i==null?void 0:i.value),t.emit("change",i==null?void 0:i.value),l.value=i},get(){var i,m;return(m=(i=r.find(f=>f.value.value==o.value))==null?void 0:i.value)!=null?m:l.value}});F(Se,o),F(_e,s),F(De,A(()=>e.activeClass)),F(Me,A(()=>e.unactiveClass)),F(Ee,A(()=>e.itemClass));const r=[];return F(Ie,i=>(r.push(i),(i.value.value==o.value||s.value==null)&&(l.value=i.value),()=>{r.splice(r.indexOf(i),1)})),{active:s,modelValue:o}}var bt=V({name:"i-select",props:ne(ae({},Be),{disabled:{type:Boolean,default:!1},width:{type:Number,default:120},emptyLabel:{type:String}}),setup(e,t){const{active:l}=je(e,t),o=w(!1),s=w();q(o,f);function r(){o.value=!o.value&&!b.value}const i=w({x:0,y:0,w:0}),m=A(()=>({left:`${i.value.x}px`,top:`${i.value.y}px`,width:`${i.value.w}px`}));function f(){if(s.value){const{width:u,height:d,left:C,top:x}=s.value.getBoundingClientRect();i.value={w:u,x:C,y:x+d+4}}}const b=A(()=>!!e.disabled);return we(s,()=>o.value=!1),window.addEventListener("resize",f),window.addEventListener("scroll",f),be(()=>{window.removeEventListener("resize",f),window.removeEventListener("scroll",f)}),()=>{var d,C;const{slots:u}=t;return n("div",{class:"i-select",onClick:r,style:{width:e.width==0?0:`${e.width}px`}},[n("div",{class:["i-select-trigger"].concat(e.disabled?"disabled":""),ref:s},[n("span",{class:"i-select-label"},[(C=(d=l==null?void 0:l.value)==null?void 0:d.key)!=null?C:e.emptyLabel]),n("div",{class:"i-select-down-icon"},null)]),n(xe,{to:"body"},{default:()=>[n(ke,{name:"dropdown"},{default:()=>[W(n("div",{class:"i-select-dropdown",style:m.value},[P(u,"default")]),[[K,o.value]])]})]})])}}});const xt={value:{type:Z},label:{type:[Function,String]}};function kt(e){const t=z(_e),l=z(Ie),o=z(Se),s=A(()=>{var u;return e.value==((u=t==null?void 0:t.value)==null?void 0:u.value)}),r=A(()=>{var d;let u=e.label;return typeof u=="function"&&(u=(d=u(e.value))!=null?d:e.value),{key:u,value:e.value}});if(l){const u=l(r);be(u)}function i(){t&&(t.value=r.value)}q(r,(u,d)=>{t&&d.value==o.value&&(t.value=u)});const m=A(()=>{var u,d;return[(d=(u=z(Ee))==null?void 0:u.value)!=null?d:""].concat(s.value?f.value:b.value)}),f=A(()=>{var u,d;return(d=(u=z(De))==null?void 0:u.value)!=null?d:"active"}),b=A(()=>{var u,d;return(d=(u=z(Me))==null?void 0:u.value)!=null?d:"unactive"});return{change:i,active:t,isActive:s,current:r,activeClass:f,unactiveClass:b,itemClass:m}}var Ct=V({name:"i-item",props:xt,setup(e,{slots:t}){const{itemClass:l,change:o,current:s}=kt(e);return()=>{var r;return n("div",{onClick:o,class:l.value},[(r=s.value.key)!=null?r:P(t,"default")])}}}),Ve=V({name:"i-selection",props:Be,setup(e,t){je(e,t);const{slots:l}=t;return()=>n("div",null,[P(l,"default")])}});function Rt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!lt(e)}var _t=V({name:"i-indices",components:{ISelection:Ve},props:{modelValue:{type:Z},label:{type:String}},setup(e,{slots:t,emit:l}){const o=ie(e,"modelValue",l);return()=>{let s;return n(g("i-selection"),{modelValue:o.value,"onUpdate:modelValue":r=>o.value=r,class:"flex flex-wrap","active-class":"text-white bg-primary rounded-1","unactive-class":"text-dark hover:bg-primary hover:text-primary hover:bg-opacity-12","item-class":"mr-2 px-2  text-center h-8 leading-8 duration-300 cursor-pointer"},Rt(s=P(t,"default"))?s:{default:()=>[s]})}}}),It=V({name:"i-input",props:{modelValue:{type:String},placeholder:{type:String},multiline:{type:Boolean,default:!1}},setup(e,{emit:t}){const l=A({get(){var s;return(s=e.modelValue)!=null?s:""},set(s){t("update:modelValue",s)}});function o(s){var i;const r=s.target;r&&(l.value=(i=r.textContent)!=null?i:"")}return()=>e.multiline?n("div",{contenteditable:!0,class:"i-input",placeholder:e.placeholder,textContent:l.value,onInput:o},null):W(n("input",{class:"i-input",placeholder:e.placeholder,"onUpdate:modelValue":s=>l.value=s},null),[[st,l.value]])}});function St(e="body",t){return Ae(xe,{to:e},t)}var Dt=V({name:"i-dialog",components:{IButton:Re},props:{visible:{type:Boolean,default:!1},class:{type:String},yesButton:{type:[String,Boolean],default:"\u786E\u5B9A"},cancelButton:{type:[String,Boolean],default:"\u53D6\u6D88"},closeOnYes:{type:Boolean,default:()=>!0},closeOnCancel:{type:Boolean,default:()=>!0}},emits:["close","yes","cancel","update:visible"],setup(e,{emit:t,slots:l}){const o=w(),s=ie(e,"visible",t);we(o,()=>t("update:visible",!1));function r(){t("yes"),e.closeOnYes&&(s.value=!1)}function i(){t("cancel"),e.closeOnCancel&&(s.value=!1)}function m(){if(e.yesButton||e.cancelButton){const f=[];return e.cancelButton&&f.push(n(g("i-button"),{onClick:i},{default:()=>[e.cancelButton]})),e.yesButton&&f.push(n(g("i-button"),{type:"primary",onClick:r},{default:()=>[e.yesButton]})),n("div",{class:"flex mt-8 justify-end"},[f])}}return()=>St("body",[n(ke,{name:"dialog",mode:"out-in"},{default:()=>[W(n("div",{class:["dialog-mask bg-#00000066 w-full h-full fixed top-0 left-0 z-999 flex justify-center items-center duration-300 ease-in-out"]},[n("div",{ref:o,class:["bg-light h-auto shadow-sm round-1 p-4 dialog",e.class]},[n("div",{class:"w-full"},[n("div",{class:"h-auto"},[k(" "),P(l,"default")]),m()])])]),[[K,s.value]])]})])}});var Et=ce(Dt,[["__scopeId","data-v-6d00bcdd"]]),Mt={install(e){e.component("apt-button",Re),e.component("apt-select",bt),e.component("apt-selection",Ve),e.component("apt-item",Ct),e.component("apt-indices",_t),e.component("apt-input",It),e.component("apt-dialog",Et)}};const ee=ot(it);ee.use(wt);ee.use(ft);ee.use(Mt);ee.mount("#app");
