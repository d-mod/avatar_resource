var T=Object.defineProperty,z=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var A=(e,t,s)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,S=(e,t)=>{for(var s in t||(t={}))W.call(t,s)&&A(e,s,t[s]);if(k)for(var s of k(t))H.call(t,s)&&A(e,s,t[s]);return e},_=(e,t)=>z(e,F(t));import{c as K,a as M,d as h,h as c,r as g,R as U,b as u,p as L,e as b,w as P,o as D,f as Y,T as C,i as $,g as m,j as q,v as G,k as O,l as J,m as Q,n as X}from"./vendor.9b27e332.js";const Z=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}};Z();location.hostname.endsWith("gitee.io")||(location.href="//davatar.gitee.io");const ee="modulepreload",E={},te="/",R=function(t,s){return!s||s.length===0?t():Promise.all(s.map(i=>{if(i=`${te}${i}`,i in E)return;E[i]=!0;const n=i.endsWith(".css"),o=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${o}`))return;const l=document.createElement("link");if(l.rel=n?"stylesheet":ee,n||(l.as="script",l.crossOrigin=""),l.href=i,document.head.appendChild(l),n)return new Promise((r,a)=>{l.addEventListener("load",r),l.addEventListener("error",a)})})).then(()=>t())};var se=K({history:M("/"),routes:[{name:"index",path:"/",component:()=>R(()=>import("./index.9ba6f827.js"),["assets/index.9ba6f827.js","assets/index.2ac36f3e.css","assets/vendor.9b27e332.js"])},{name:"character",path:"/:id",component:()=>R(()=>import("./index.9ba6f827.js"),["assets/index.9ba6f827.js","assets/index.2ac36f3e.css","assets/vendor.9b27e332.js"])}]});var ne=h({name:"i-button",props:{disabled:{type:Boolean,default:!1},small:{type:Boolean,default:!1},to:{type:String,default:null}},setup(e,{slots:t}){return()=>c(e.to?U:"button",{to:e.to,class:{"i-button":!0,disabled:e.disabled,small:e.small}},g(t,"default"))}});const V=Symbol("[i-selection]active"),x=Symbol("[i-selection]init"),I=Symbol("[i-selection]active-class"),B={modelValue:{type:[String,Number,Object,Boolean]},activeClass:{type:String}};function N(e,t){const s=u({set(n){t.emit("update:modelValue",n==null?void 0:n.value)},get(){return i.find(n=>n.value==e.modelValue)}});L(V,s),L(I,u(()=>e.activeClass));const i=[];return L(x,n=>{i.push(n),(s.value==null||s.value==null)&&(s.value=n.value)}),{active:s}}var ie=h({name:"i-select",props:_(S({},B),{disabled:{type:Boolean,default:!1},width:{type:Number,default:120},emptyLabel:{type:String}}),setup(e,t){const{active:s}=N(e,t),i=b(!1),n=b();P(i,a);function o(){i.value=!i.value&&!d.value}const l=b({x:0,y:0,w:0}),r=u(()=>({left:`${l.value.x}px`,top:`${l.value.y}px`,width:`${l.value.w}px`,visibility:i.value?void 0:"hidden"}));function a(){if(n.value){const{width:y,height:f,left:p,top:v}=n.value.getBoundingClientRect();l.value={w:y,x:p,y:v+f+4}}}const d=u(()=>!!e.disabled);return D(n,()=>i.value=!1),window.addEventListener("resize",a),window.addEventListener("scroll",a),Y(()=>{window.removeEventListener("resize",a),window.removeEventListener("scroll",a)}),function(){function f(){var v,j;return c("div",{class:{"i-select-trigger":!0,disabled:e.disabled},ref:n},[c("span",{class:"i-select-label"},(j=(v=s==null?void 0:s.value)==null?void 0:v.key)!=null?j:e.emptyLabel),c("div",{class:"i-select-down-icon"})])}const p=()=>{const{slots:v}=t;return c(C,{to:"body"},[c("div",{class:"i-select-dropdown",style:r.value},g(v,"default"))])};return c("div",{class:"i-select",onClick:o,style:{width:e.width==0?0:`${e.width}px`}},[f(),p()])}}});const oe={value:{type:[Object,String,Number,Boolean]},label:{type:[Function,String]}};function le(e){const t=$(V),s=$(x),i=u(()=>{var r;return e.value==((r=t==null?void 0:t.value)==null?void 0:r.value)}),n=u(()=>{let r=e.label;return typeof r=="function"&&(r=r(e.value)),r!=null?r:e.value}),o=u(()=>({key:n.value,value:e.value}));s&&s(o.value),P(o,()=>{i.value&&t&&(t.value=o.value)});const l=$(I);return{active:t,isActive:i,current:o,label:n,activeClass:l}}var re=h({name:"i-option",props:oe,setup(e){const{active:t,activeClass:s,isActive:i,current:n,label:o}=le(e);return()=>{var l;return c("span",{class:{"i-option":!0,[(l=s==null?void 0:s.value)!=null?l:"active"]:i.value},onClick(){t&&(t.value=n.value)}},o.value)}}});var ae=h({name:"i-indices",props:_(S({},B),{label:{type:String}}),setup(e,t){N(e,t);const{slots:s}=t;return()=>{const i=[];return e.label&&i.push(m("span",{class:"i-indices-label",textContent:e.label},null)),i.push(g(s,"default")),m("div",{class:"i-indices"},[i])}}});var ce=h({name:"i-input",props:{modelValue:{type:String},placeholder:{type:String}},setup(e,{emit:t}){const s=u({get(){return e.modelValue},set(i){t("update:modelValue",i)}});return()=>q(m("input",{class:"i-input",placeholder:e.placeholder,"onUpdate:modelValue":i=>s.value=i},null),[[G,s.value]])}});function ue(e="body",t){return c(C,{to:e},t)}var de=h({name:"i-dialog",props:{visible:{type:Boolean,default:!1},dialogClass:{type:String}},setup(e,{emit:t,slots:s}){const i=b();return D(i,()=>t("update:visible",!1)),()=>{const n=e.visible?m("div",{class:{"i-dialog-mask":!0,visible:e.visible}},[m("div",{ref:i,class:["i-dialog",e.dialogClass]},[g(s,"default")])]):m("div",null,null);return ue("body",[n])}}}),fe={install(e){e.component("apt-button",ne),e.component("apt-select",ie),e.component("apt-option",re),e.component("apt-indices",ae),e.component("apt-input",ce),e.component("apt-dialog",de)}};const ye=O("collocation",{state(){return{list:[],display_list:[],collocation_types:[]}},actions:{async fetchData(){let{list:e=[],types:t=[]}=await fetch("/api/collocation.json").then(s=>s.json());this.list=e,this.collocation_types=t},async load(e){let{profession:t,keyword:s,size:i,page:n,type:o,year:l}=e;const r=s.split(" ");let a=this.list.filter(d=>!(!r.every(y=>{var f,p;return((f=d.name)==null?void 0:f.includes(y))||((p=d.description)==null?void 0:p.includes(y))})||t&&d.profession!==t||o&&d.type!==o||l&&d.year!==l));a=a.slice(0,(n+1)*i),this.display_list=a}},getters:{years(){let e=new Date().getFullYear(),t=new Array(e-2007);for(let s=0;s<t.length;s++)t[s]=e-s;return t}}}),pe=["hair","cap","face","neck","coat","skin","belt","pants","shoes"],ge=O("dressing",{state(){return{profession_list:[],profession:void 0,dresses:{},icons:{}}},getters:{profession_name(){var e,t;return(t=(e=this.profession)==null?void 0:e.name)!=null?t:"swordman"}},actions:{async loadProfession(){if(this.profession_list.length===0){let e=await fetch("/api/profession.json").then(t=>t.json());return this.profession_list=e,this.profession=e[0],e}return[]},async setProfession(e){this.profession=e,localStorage.setItem("last-profession",e.name);let t=[];for(let s of pe)t.push(this.getDressList(s)),t.push(this.getIcon(s));await Promise.all(t)},setProfessionName(e){this.profession=this.profession_list.find(t=>t.name==e)},async getIcon(e){let t=this.profession_name;if(!this.icons[t]||!this.icons[t][e]){let s=await fetch(`/icon/${t}/${e}.json`).then(i=>i.json());this.icons[t]=this.icons[t]||{},this.icons[t][e]=s}return this.icons[t][e]},async getDressList(e){let t=this.profession_name;if(!this.dresses[t]||!this.dresses[t][e]){let s=await fetch(`/api/${t}/${e}.json`).then(i=>i.json());s=s.map(i=>Object.assign(i,{profession:t,part:e,icon:`/icon/${t}/${e}/${i.code}.png`})),this.dresses[t]=this.dresses[t]||{},this.dresses[t][e]=s}return this.dresses[t][e]},async getDress(e){let t=[];for(let s in e){if(e[s]==="-1")continue;let n=(await this.getDressList(s)).find(o=>o.code===e[s]);n&&t.push(n)}return t}}});var ve=J();const w=Q(X);w.use(se);w.use(ve);w.use(fe);w.mount("#app");export{ye as a,ge as u};
