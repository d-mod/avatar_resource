var Te=Object.defineProperty,Ne=Object.defineProperties;var Ge=Object.getOwnPropertyDescriptors;var de=Object.getOwnPropertySymbols;var Ye=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable;var fe=(e,t,l)=>t in e?Te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,ne=(e,t)=>{for(var l in t||(t={}))Ye.call(t,l)&&fe(e,l,t[l]);if(de)for(var l of de(t))ze.call(t,l)&&fe(e,l,t[l]);return e},le=(e,t)=>Ne(e,Ge(t));import{d as V,r as w,a as N,b as ve,c as A,e as n,f as he,g as Fe,u as ie,h as pe,i as Pe,j as $e,k as g,l as G,w as W,v as q,o as ye,m as Je,n as ee,p as Ze,q as k,s as We,t as oe,x as Xe,y as He,z as Ke,A as qe,B as et,C as tt,D as ge,E as P,R as at,F as z,G as Ae,H as we,T as be,I as xe,J as F,K as nt,L as lt,M as st,N as ot}from"./vendor.44ecdecf.js";const it=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function l(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=l(s);fetch(s.href,i)}};it();window.addEventListener("contextmenu",e=>e.preventDefault());window.addEventListener("beforeinstallprompt",function(e){setTimeout(function(){e.prompt(),e.userChoice.then(()=>{console.log("davatar installed.")})},2e3)},{once:!0});var K="data:image/png;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAyAAD/4QMpaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjAtYzA2MCA2MS4xMzQ3NzcsIDIwMTAvMDIvMTItMTc6MzI6MDAgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpDN0EzNkRCRDdGRkIxMUUyODRDOEVCRjk0QjI1RkQ3NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpDN0EzNkRCRTdGRkIxMUUyODRDOEVCRjk0QjI1RkQ3NyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkM3QTM2REJCN0ZGQjExRTI4NEM4RUJGOTRCMjVGRDc3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkM3QTM2REJDN0ZGQjExRTI4NEM4RUJGOTRCMjVGRDc3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQACAYGBgYGCAYGCAwIBwgMDgoICAoOEA0NDg0NEBEMDg0NDgwRDxITFBMSDxgYGhoYGCMiIiIjJycnJycnJycnJwEJCAgJCgkLCQkLDgsNCw4RDg4ODhETDQ0ODQ0TGBEPDw8PERgWFxQUFBcWGhoYGBoaISEgISEnJycnJycnJycn/8AAEQgAHAAcAwEiAAIRAQMRAf/EAHoAAQADAQAAAAAAAAAAAAAAAAUCBgcDAQEAAwAAAAAAAAAAAAAAAAAAAQIDEAAABAMGBAUDBQEAAAAAAAABEQIDEgQFACExExQGQSIVFmFxgTIHQmMmUaHBQ5MXEQACAAYDAQAAAAAAAAAAAAABAgARMWESIkFRAyH/2gAMAwEAAhEDEQA/AKJujdFe67UZeXqE3LMS83MMtobmHgASdXEtSozFQqvvG7ALRprfyJV2FTVJerU/LgPM6y5NLQacUgpKhCK/ALE7gWK6/VQEwOdmTFQc17zgksAuAfK27/F+7q1ueWk6VRKdK0ujUVLKJ19a1OrdbhUnLaQCUEtxSRUKxHxvO2Pn5eeCzRSZCZIn9jR3bJtjU8xhrle3RLvqlpuqVFh9oYVsuzEyhQKD6VpUsFBa2d11fsTqGqd1vVNLqM1wj0h5kEcMUHLh4kduHyxuakbr3QEzQwBxhhhMsqaKEH1IUtQrSFwkADCAjePkVhjR/wA/yYni6yZwIy4tL7T9xlw/ixvLzyTRanjjEwV2k2xp3eCqyKBq9RAQ5gmn/AwzFmXiVr38W7g2zRJepp3FUZyRF9bIywSbsw2CwQlYLjCWEMDDGxu7+0urOZutzIlxabTmUa8rP/rzMovZwKPnsD+IGqLqsXGPTH+/G1kY4rNTS0Q6jI7Ct4JBKoyQKcBjK4CD9S4WZ5u0SIT6n44aXzw9cLQT2gYQ9Ux46UvU+Fr9+Ido/VpI/s5WXk/76jUep/asZjNdTW3UFUSbYUv3H//Z",ke="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACRSURBVEhL7daxDYAgEIXhmwQ1DsACNo7gANYu4Riu42yYh7mrKO9RACZ/I8YvwWBOcF33lp73pAbDsBBCvrEfa5qXyTW8E++OMf6o6gxMUxRWBpmYBsPA0gOMBuheJyDOR2mRkR380iKjTra0/W/Y/pYO0LMBumdgrSHKQPwBmKhObAZiEGahitkgrNN3jUREPjyCoXkD2eO/AAAAAElFTkSuQmCC",rt=V({name:"canvas-box",props:{width:{type:Number,default:()=>300},height:{type:Number,default:()=>200},images:{type:Array,default:()=>[]},canvasClass:{type:[String,Array],default:""},scale:{type:Number,default:()=>1}},setup(e){const t=w(),l=N({x:0,y:0}),o=N({x:0,y:0}),s=w(!1);ve([()=>e.images,()=>e.scale],p,{debounce:10});const i=w(!1),r=w(0);async function d(x,_){return new Promise(U=>{if(_!=r.value){U(void 0);return}const M=new Image;M.onload=()=>{U(M)},M.onerror=()=>{U(void 0)},M.src=x})}async function p(){var x;i.value=!0;try{const _=e.width,U=e.height,M=new Date().getTime();r.value=M;let S=Array.from(e.images);S.sort((h,E)=>h.z-E.z);const c=S.map(async h=>{var E,B,T,j;return h.img||(h.img=await d(h.url,M),h.width=(B=(E=h.img)==null?void 0:E.width)!=null?B:h.width,h.height=(j=(T=h.img)==null?void 0:T.height)!=null?j:h.height),h});S=await Promise.all(c);let R=e.width,O=e.height,D=0,Y=0;for(let h of S)R=Math.min(h.x,R),O=Math.min(h.y,O),D=Math.max(h.width,D),Y=Math.max(h.height,Y);S=S.map(h=>le(ne({},h),{x:h.x-R,y:h.y-O}));let ae=Math.round((e.width-D)/2+o.x),X=Math.round((e.height-Y)/2+o.y);const $=(x=t.value)==null?void 0:x.getContext("2d");if($){const h=e.scale;$.clearRect(0,0,_,U),S.forEach(E=>{const B=Math.round((E.x+ae)*h);let T=Math.round((E.y+X)*h);const j=Math.round(E.width*h),H=Math.round(E.height*h);E.img&&$.drawImage(E.img,B,T,j,H)})}}finally{i.value=!1}}function b({x,y:_}){s.value=!0,l.x=x,l.y=_}function u(){s.value=!1}function f(x){s.value&&(o.x+=(x.clientX-l.x)/e.scale,o.y+=(x.clientY-l.y)/e.scale,l.x=x.clientX,l.y=x.clientY,p())}const C=A(()=>({width:e.width?`${e.width}px`:"0",height:e.height?`${e.height}px`:"0"}));return()=>n("div",{class:"relative"},[n("div",{class:"bg-light h-full w-full z-99 absolute items-center justify-center".concat(" ").concat(i.value?"flex":"hidden")},[n("div",{class:"text-primary loading"},null)]),n("canvas",{ref:t,style:C.value,class:[e.canvasClass].concat("cursor-move","select-none"),width:e.width,height:e.height,onMouseleave:u,onMousedown:b,onMouseup:u,onMousemove:f},null)])}});const ct=he("collocation",{state(){return{list:[],display_list:[],collocation_types:[]}},actions:{async fetchData(){let{list:e=[],types:t=[]}=await fetch("/api/collocation.json").then(l=>l.json());this.list=e,this.collocation_types=t},async load(e){let{profession:t,keyword:l,size:o,page:s,type:i,year:r}=e;const d=l.split(" ");let p=this.list.filter(b=>!(!d.every(u=>{var f,C;return((f=b.name)==null?void 0:f.includes(u))||((C=b.description)==null?void 0:C.includes(u))})||t&&b.profession!==t||i&&b.type!==i||r&&b.year!==r));p=p.slice(0,(s+1)*o),this.display_list=p}},getters:{years(){let e=new Date().getFullYear(),t=new Array(e-2007);for(let l=0;l<t.length;l++)t[l]=e-l;return t}}}),ut=["hair","cap","face","neck","coat","skin","belt","pants","shoes"],re=he("dressing",{state(){return{profession_list:[],profession:void 0,dresses:{},icons:{}}},getters:{profession_name(){var e,t;return(t=(e=this.profession)==null?void 0:e.name)!=null?t:"swordman"}},actions:{async loadProfession(){if(this.profession_list.length===0){let e=await fetch("/api/profession.json").then(t=>t.json());return this.profession_list=e,this.profession=e[0],e}return[]},async setProfession(e){this.profession=e,localStorage.setItem("last-profession",e.name);let t=[];for(let l of ut)t.push(this.getDressList(l)),t.push(this.getIcon(l));await Promise.all(t)},setProfessionName(e){this.profession=this.profession_list.find(t=>t.name==e)},async getIcon(e){let t=this.profession_name;if(!this.icons[t]||!this.icons[t][e]){let l=await fetch(`/icon/${t}/${e}.json`).then(o=>o.json());this.icons[t]=this.icons[t]||{},this.icons[t][e]=l}return this.icons[t][e]},async getDressList(e){let t=this.profession_name;if(!this.dresses[t]||!this.dresses[t][e]){let l=await fetch(`/api/${t}/${e}.json`).then(o=>o.json());l=l.map(o=>Object.assign(o,{profession:t,part:e,icon:`/icon/${t}/${e}/${o.code}.png`})),this.dresses[t]=this.dresses[t]||{},this.dresses[t][e]=l}return this.dresses[t][e]},async getDress(e){let t=[];for(let l in e){if(e[l]==="-1")continue;let s=(await this.getDressList(l)).find(i=>i.code===e[l]);s&&t.push(s)}return t}}});var dt=Fe(),ft=V({props:{collapsed:{type:Boolean,default:()=>!0}},setup(e,{emit:t}){const l=re(),o=ie(e,"collapsed",t),s=pe(o);function i(u){return{width:"26px",height:"26px",backgroundImage:'url("/icon/profession.png")',backgroundPositionX:`-${u*26}px`,backgroundPositionY:`${0}px`}}const r=Pe({selector:"html",valueLight:"light",valueDark:"dark"}),d=pe(r),p=$e("(max-width: 640px)");function b(u){t("apply",u),gtag("event","select-profession",{label:u.label,name:u.name}),p.value&&s(!0)}return()=>n(g("apt-selection"),{value:l.profession,onChange:b,"item-class":"odd:flex-row-reverse text-sm flex-1 h-12 flex items-center cursor-pointer select-none  duration-200 relative","active-class":"text-primary bg-primary-36",class:["h-full fixed left-0 top-0 bg-light float-left  text-dark duration-300 shadow z-999"].concat(o.value?"w-12":"sm:w-64 w-full")},{default:()=>[n(g("apt-button"),{title:o.value?"\u5C55\u5F00":"\u6536\u8D77",class:" font-bold h-8 text-center text-xl w-full duration-300 select-none",onClick:s},{default:()=>[n("div",{class:o.value?"icon-mdi-add":"icon-mdi-baseline-minus"},null)]}),G(l.profession_list,(u,f)=>n(g("apt-item"),{title:u.label,key:f,value:u,class:["hover:text-primary hover:bg-primary-12"].concat(o.value?"justify-center":"px-8")},{default:()=>[n("div",{class:!o.value&&"absolute",style:i(f)},null),W(n("div",{class:"flex-1 text-center"},[u.label]),[[q,!o.value]])]})),n(g("apt-button"),{title:r.value?"\u6D45\u8272\u6A21\u5F0F":"\u6DF1\u8272\u6A21\u5F0F",onClick:d,class:"font-bold text-xl  w-full duration-300 select-none"},{default:()=>[n("div",{class:["w-6 h-6 bg-center bg-no-repeat text-dark"].concat(r.value?"icon-mdi-outline-dark-mode":"icon-mdi-outline-light-mode")},null)]})]})}}),pt=V((e,{emit:t})=>{const l=re(),o=ct(),s={width:150,height:232},i={width:`${s.width}px`,height:`${s.height}px`};ye(async()=>{await o.fetchData()});const r=w(!1),d=N({profession:"swordman",year:0,keyword:"",type:!1,page:0,size:16}),p=N({page:0,totalPages:1});async function b(){r.value=!0,await o.load(d),p.page=0,r.value=!1}const u=w(!1);function f(c){return()=>{const{profession:R,code:O}=c;gtag("event","select_template",c);let D=oe.parse(O);t("import",{name:R,query:D}),window.scrollTo(0,0)}}function C({profession:c,code:R}){return()=>t("export",`${c}?${R}`)}const{x,y:_}=Je();async function U(){const c=Math.floor(_.value/s.height)+1;if(c>p.page*2){u.value=!0,p.page=c/2;let R=Object.assign({},d,p);await o.load(R),u.value=!1}await We(()=>_.value+=s.height)}function M(c){return{backgroundImage:`url("/cover/${c.id}.png")`,height:"calc(100% - 48px)"}}ee(()=>l.profession,c=>{c!=null&&c.name&&(d.profession=c.name)}),ve(d,b,{debounce:100,immediate:!0});const S=w();return Ze(S,c=>{const R=c[0];if(R){const O=R.contentRect.width,D=Math.floor(O/156)*2;d.size=D}}),()=>n("div",null,[n("div",{class:"flex flex-wrap h-auto px-4 pt-2"},[n("div",{class:" mx-auto my-1 sm:mx-0"},[n(g("apt-input"),{placeholder:"\u641C\u7D22",onKeyup_native:b,"action-icon":"search",class:"rounded-1 h-8 w-60",modelValue:d.keyword,"onUpdate:modelValue":c=>d.keyword=c},null)]),n(g("apt-indices"),{class:"my-1",modelValue:d.profession,"onUpdate:modelValue":c=>d.profession=c},{default:()=>[n(g("apt-item"),{value:0,label:"\u5168\u90E8"},null),G(l.profession_list,c=>n(g("apt-item"),{key:c.name,label:c.label,value:c.name},null))]}),n(g("apt-indices"),{class:"my-1",modelValue:d.type,"onUpdate:modelValue":c=>d.type=c},{default:()=>[n(g("apt-item"),{value:0,label:"\u5168\u90E8"},null),G(o.collocation_types,c=>n(g("apt-item"),{"text-dark":"black",key:c.name,label:c.label,value:c.name},null))]}),n(g("apt-indices"),{class:"my-1",modelValue:d.year,"onUpdate:modelValue":c=>d.year=c},{default:()=>[n(g("apt-item"),{value:0},{default:()=>[k("\u5168\u90E8")]}),G(o.years,c=>n(g("apt-item"),{key:c,label:`${c}\u5E74`,value:c},null))]})]),n("div",{onTouchend:U,ref:S,class:"flex flex-wrap duration-300 collocations"},[G(o.display_list,c=>n("div",{title:c.description,class:"py-3 duration-400 item relative box-border hover:bg-dark-12",style:i},[n("div",{style:M(c),class:"bg-bottom bg-no-repeat w-full top-0 z-0 absolute"},null),n("div",{class:"h-full w-full z-1 relative"},[n("div",{class:"h-6 text-xs text-center text-dark w-full bottom-3 leading-6 name overflow-hidden whitespace-nowrap",textContent:c.name},null),n("div",{class:"text-sm text-white text-center w-full block invisible info"},[n("div",null,[n("span",null,[k("\u4F5C\u8005:")]),n("span",{class:"text-primary",textContent:c.author},null)]),n("div",null,[n("span",null,[k("\u70ED\u5EA6:")]),n("span",{textContent:c.amount},null)]),n("div",{class:"flex flex-col mx-auto items-center"},[n(g("apt-button"),{class:" bg-white mt-4  hover:bg-primary-78 hover:text-white",onClick:f(c),textContent:c.custom?"\u4E0B\u8F7D":"\u5BFC\u5165"},null),!c.custom&&n(g("apt-button"),{class:" bg-white mt-4  hover:bg-primary-78 hover:text-white",onClick:C(c)},{default:()=>[k("\u5BFC\u51FA")]})])])])]))]),n(g("apt-button"),{title:"\u67E5\u770B\u66F4\u591A",class:"text-xl w-full duration-200 hover:bg-primary-24",onClick:U,"full-width":!0},{default:()=>[n("div",{class:"text-2xl icon-mdi-baseline-keyboard-arrow-down"},null)]})])});var Ce=(e,t)=>{const l=e.__vccOpts||e;for(const[o,s]of t)l[o]=s;return l},mt=Ce(pt,[["__scopeId","data-v-b4b39d76"]]);function vt(e={}){const{immediate:t=!1,onNeedRefresh:l,onOfflineReady:o,onRegistered:s,onRegisterError:i}=e;let r;const d=async(p=!0)=>{};return"serviceWorker"in navigator&&(r=new Xe("/sw.js",{scope:"/",type:"classic"}),r.addEventListener("activated",p=>{p.isUpdate?window.location.reload():o==null||o()}),r.register({immediate:t}).then(p=>{s==null||s(p)}).catch(p=>{i==null||i(p)})),d}function ht(e={}){const{immediate:t=!0,onNeedRefresh:l,onOfflineReady:o,onRegistered:s,onRegisterError:i}=e,r=w(!1),d=w(!1);return{updateServiceWorker:vt({immediate:t,onNeedRefresh(){r.value=!0,l==null||l()},onOfflineReady(){d.value=!0,o==null||o()},onRegistered:s,onRegisterError:i}),offlineReady:d,needRefresh:r}}var me=V({name:"app",components:{CanvasBox:rt,Profession:ft,Collocation:mt},setup(){const e=N({part:"skin"}),t=N({width:300,height:300,scale:100}),l=re(),o=A(()=>{var a;return((a=l.profession)==null?void 0:a.weapons)||[]});A(()=>o.value.find(a=>a.name==e.weapon));const s=A(()=>{let a=e.part;return a=="weapon"&&!!e.weapon&&(a=e.weapon),a}),i=A(()=>t.scale/100),r=w(""),d=w([]),p=w(""),b=A(()=>{var v;const a=(v=l.profession)==null?void 0:v.name;let m=[];if(a)for(let y in f){let I=f[y].images||[],Q=y;Q==="weapon"&&(Q=e.weapon),Q&&(I.forEach(ue=>ue.url=`/image/${a}/${Q}/${ue.name}`),m.push(...I))}return m}),u=w([]),f=N({hair:L("hair"),cap:L("cap"),face:L("face"),neck:L("neck"),coat:L("coat"),skin:L("skin"),belt:L("belt"),pants:L("pants"),shoes:L("shoes")});function C(a){return!!a&&parseInt(a)>-1}function x(a){if(a&&a.target){const m=a.target;m.src=K}}function _(a){return`${a.name||""}[${a.code}]`}function U(a){let m=`${a.part}/${a.code}.png`,v=d.value.findIndex(y=>y.name===m);if(v>-1){let y=d.value[v];return{backgroundImage:`url("/icon/${a.profession}/${a.part}.png")`,backgroundPositionX:`${y.x}px`,backgroundPositionY:`${y.y}px`}}return{backgroundImage:`url("${K}") `}}function M(a){let m=40,v=40,y=28+40;return m+=Math.floor(a/3)*y,v+=a%3*y,{top:`${m}px`,left:`${v}px`,backgroundImage:`url(${ke})`}}const S=A(()=>r.value.split(" ").filter(a=>a.length>0)),c=A(()=>{let a=[];return S.value.length===0?a=Array.from(u.value):a=u.value.filter(R),a.sort((m,v)=>parseInt(m.code)-parseInt(v.code)),a});function R(a){const m=S.value;for(let v of m)if(!(a.name&&a.name.match(v)||a.code.match(v))&&!(a.name&&a.name.indexOf(v)>-1)&&!(a.code.indexOf(v)>-1))return!1;return!0}function O(a){let{code:m,part:v}=a;return!!v&&m===f[v].code}async function D({name:a,query:m={}}={}){for(let I in f)m[I]||h(I);if(!a)return;l.setProfessionName(a),await Y();const y=(await l.getDress(m)).map(async I=>await X(I));await Promise.all(y)}async function Y(){let a=s.value;const[m,v]=await Promise.all([l.getIcon(a),l.getDressList(a)]);d.value=m,u.value=v}async function ae(a){e.part!==a&&(e.part=a,await Y())}async function X(a){let{code:m,part:v}=a;const y=parseInt(m);if(isNaN(y)||y===-1){h(v);return}(!v||!f[v])&&(v="weapon"),f[v]=Object.assign({title:f[v].title},a)}function $(a){return m=>{m.preventDefault(),h(a)}}function h(a){f[a]=L(a)}async function E(){await D(l.profession)}const B=N({imports:!1,exports:!1}),T=w(!1),j=w(""),H=/.*\?(.*=&)*/;async function Ue(){try{let a=await navigator.clipboard.readText();a.match(H)&&(j.value=a)}finally{B.imports=!0}}async function Qe(){const a=j.value;if(a.match(H)){let m=a.indexOf("?");m<0&&(m=a.length-1);let v=a.substring(0,m),y=a.substring(m+1),I=oe.parse(y);await D({name:v,query:I})}}async function ce(a){if(!a){let m=l.profession_name,v={};for(let y in f){let{code:I}=f[y];if(C(I)){let Q=(y==="weapon"?p.value:y)||y;v[Q]=I}}a=`${m}?${oe.stringify(v)}`}j.value=a,T.value=!0;try{await navigator.clipboard.writeText(a)}catch{T.value=!1}finally{B.exports=!0}}ye(async()=>{const a=He(),m=Ke(),v=await l.loadProfession();if(v&&v.length>0){let{path:y}=a,I=a.query;y=y.replace("/","");let Q={};y&&y.length>0?(Q={name:y,query:I},await m.replace("/")):l.profession&&(Q=l.profession),await D(Q)}});const J=w(!0),{isSwiping:Le,direction:Oe}=qe(document.documentElement);return ee(Le,a=>{if(a)switch(Oe.value){case"LEFT":J.value=!0;return;case"RIGHT":J.value=!1;return}}),ht({immediate:!0,onRegistered(a){a&&setInterval(async()=>{console.log("Checking for sw update"),await a.update()},2e4)}}),()=>n("div",{class:"bg-neutral"},[n(g("profession"),{collapsed:J.value,"onUpdate:collapsed":a=>J.value=a,onApply:D},null),n("div",{class:["flex justify-center duration-300 pr-4 pt-8"].concat(J.value?"pl-16":"sm:pl-64")},[n("div",{class:"flex flex-wrap max-w-400 justify-center items-start overflow-x-hidden "},[n("div",{class:"flex flex-wrap"},[n("div",{class:"bg-light flex-wrap flex shadow w-full justify-center items-center "},[n("div",{class:"flex h-20 w-full items-center justify-center"},[n("div",{class:"border-primary  flex border-1 rounded-1 overflow-hidden items-center"},[n(g("apt-button"),{class:"border-r-primary cursor-pointer border-r-1 border-0",title:"\u91CD\u7F6E",onClick:E,size:"normal",color:"gray"},{default:()=>[n("div",{class:"text-xl icon-mdi-refresh"},null)]}),n(g("apt-button"),{class:"border-r-primary cursor-pointer border-r-1 border-0",title:"\u5BFC\u5165",onClick:Ue,size:"normal"},{default:()=>[k("\u5BFC\u5165")]}),n(g("apt-button"),{class:"cursor-pointer",onClick:()=>ce(),title:"\u5BFC\u51FA",type:"info",size:"normal"},{default:()=>[k("\u5BFC\u51FA")]})])]),n(g("canvas-box"),{height:t.height,width:t.width,images:b.value,scale:i.value},null),n("div",{class:"h-60 w-60 relative"},[G(f,(a,m,v)=>{var y;return n("div",{onClick:()=>ae(m),onContextmenu:$(m),key:m,style:M(v),class:["text-dark","text-xs","absolute","w-8","h-8","border-2","border-solid","box-border","hover:scale-130"].concat(m===e.part?"border-#ff4081":"border-transparent")},[C(a.code)?n("img",{class:"flex h-7 m-0  w-7 duration-100 select-none ",src:(y=a.icon)!=null?y:K,title:_(a),onError:x,draggable:"false"},null):n("div",{class:"flex h-7 m-0 text-xs  text-green-200 w-7  duration-100 items-center justify-center select-none",title:a.title},[a.title])])})]),n("div",{class:"h-auto justify-end overflow-hidden sm:h-93"},[n("div",{class:"flex h-12 items-center justify-center"},[n(g("apt-input"),{placeholder:"\u641C\u7D22",modelValue:r.value,"onUpdate:modelValue":a=>r.value=a},null)]),n("div",{class:" h-auto  grid  w-75 grid-cols-6  overflow-y-auto  sm:h-75 "},[n("span",{onClick:()=>h(e.part),class:"border-solid border-transparent border-2 h-8 m-3 text-xs text-dark w-8 duration-100 box-border select-none hover:scale-130 ",style:`background-image:url(${K})`},null),G(c.value,a=>n("span",{class:["w-8 h-8 border-2 border-solid box-border select-none text-xs text-dark m-3 hover:scale-130 duration-100"].concat(O(a)?"border-primary":"border-transparent"),key:a.hash,style:U(a),title:_(a),onClick:()=>X(a)},null))])])]),n(g("collocation"),{class:"bg-light shadow mt-4 w-full",onExport:ce,onImport:D},null)]),n("div",{class:"flex flex-wrap my-8 text-center text-base text-dark items-center"},[n("p",{class:"m-0 w-full"},[n("a",{class:"text-primary",href:"//gitee.com/davatar/davatar"},[k("DAvatar\xA0Ver\xA0"),"2.0.2"])]),n("p",{class:"m-0 w-full"},[k("Copyright\xA0\xA9\xA02017-present\xA0"),n("a",{class:"text-primary",href:"//gitee.com/apateat"},[k("Apateat")]),k(".")]),n("p",{class:"m-0 w-full"},[k("All\xA0rights\xA0reserved.")])])])]),n(g("apt-dialog"),{class:"h-30 p-4 w-80 relative","cancel-button":!1,visible:B.exports,"onUpdate:visible":a=>B.exports=a},{default:()=>[n("div",{class:"h-8 text-dark w-full leading-8"},[k("\u5BFC\u51FA")]),W(n("div",{class:"text-red-400"},[k("\u590D\u5236\u5931\u8D25,\u8BF7\u81EA\u884C\u590D\u5236\u5230\u526A\u8D34\u677F")]),[[q,!T.value]]),n("div",{class:" text-primary break-all select-all "},[j.value])]}),n(g("apt-dialog"),{onYes:Qe,class:"p-4 w-80",visible:B.imports,"onUpdate:visible":a=>B.imports=a},{default:()=>[n("div",{class:"h-8 text-dark w-full leading-8"},[k("\u5BFC\u5165")]),n(g("apt-input"),{multiline:!0,modelValue:j.value,"onUpdate:modelValue":a=>j.value=a,placeholder:"\u8BF7\u8F93\u5165\u4EE3\u7801",class:"h-auto w-full word-wrap"},null)]})])}});const yt={hair:"\u5934\u90E8",cap:"\u5E3D\u5B50",face:"\u8138\u90E8",neck:"\u80F8\u90E8",coat:"\u4E0A\u8863",skin:"\u76AE\u80A4",belt:"\u8170\u5E26",pants:"\u4E0B\u88C5",shoes:"\u978B"};function L(e){return{name:"",part:e,icon:ke,images:[],code:"-1",title:yt[e]}}var gt=et({history:tt("/"),routes:[{name:"index",path:"/",component:me},{name:"character",path:"/:id",component:me}]});var Re=V({name:"i-button",props:{disabled:{type:Boolean,default:!1},small:{type:Boolean,default:!1},to:{type:String,default:null},type:{type:String,default:"normal"}},setup(e,{slots:t}){const l=A(()=>{switch(e.type){case"primary":return"bg-primary text-white hover:bg-primary-78";case"outline":return"bg-light rounded-sm border-primary border-1 border-soild text-primary hover:text-light hover:bg-primary-78";case"normal":default:return"bg-light rounded-sm text-primary hover:bg-primary-12"}});return()=>ge(e.to?at:"button",{to:e.to,class:{"i-button select-none outline-none":!0,disabled:e.disabled,small:e.small,[l.value]:!0}},P(t,"default"))}});const Z=[String,Number,Object,Boolean,null],se=[String,Array],Ie=Symbol("[i-selection]active"),Se=Symbol("[i-selection]init"),De=Symbol("[i-selection]model-value"),Ee=Symbol("[i-selection]active-class"),_e=Symbol("[i-selection]item-class"),Me=Symbol("[i-selection]unactive-class"),Be={value:{type:Z,default:()=>null},modelValue:{type:Z,default:()=>null},defaultValue:{type:Z,default:()=>null},activeClass:{type:se},itemClass:{type:se},unactiveClass:{type:se}};function je(e,t){const l=w(),o=A(()=>{var r;return(r=e.value)!=null?r:e.modelValue}),s=A({set(r){t.emit("update:modelValue",r==null?void 0:r.value),t.emit("change",r==null?void 0:r.value),l.value=r},get(){var r,d;return(d=(r=i.find(p=>p.value.value==o.value))==null?void 0:r.value)!=null?d:l.value}});z(De,o),z(Ie,s),z(Ee,A(()=>e.activeClass)),z(Me,A(()=>e.unactiveClass)),z(_e,A(()=>e.itemClass));const i=[];return z(Se,r=>(i.push(r),(r.value.value==o.value||s.value==null)&&(l.value=r.value),()=>{i.splice(i.indexOf(r),1)})),{active:s,modelValue:o}}var At=V({name:"i-select",props:le(ne({},Be),{disabled:{type:Boolean,default:!1},width:{type:Number,default:120},emptyLabel:{type:String}}),setup(e,t){const{active:l}=je(e,t),o=w(!1),s=w();ee(o,p);function i(){o.value=!o.value&&!b.value}const r=w({x:0,y:0,w:0}),d=A(()=>({left:`${r.value.x}px`,top:`${r.value.y}px`,width:`${r.value.w}px`}));function p(){if(s.value){const{width:u,height:f,left:C,top:x}=s.value.getBoundingClientRect();r.value={w:u,x:C,y:x+f+4}}}const b=A(()=>!!e.disabled);return Ae(s,()=>o.value=!1),window.addEventListener("resize",p),window.addEventListener("scroll",p),we(()=>{window.removeEventListener("resize",p),window.removeEventListener("scroll",p)}),()=>{var f,C;const{slots:u}=t;return n("div",{class:"i-select",onClick:i,style:{width:e.width==0?0:`${e.width}px`}},[n("div",{class:["i-select-trigger"].concat(e.disabled?"disabled":""),ref:s},[n("span",{class:"i-select-label"},[(C=(f=l==null?void 0:l.value)==null?void 0:f.key)!=null?C:e.emptyLabel]),n("div",{class:"i-select-down-icon"},null)]),n(be,{to:"body"},{default:()=>[n(xe,{name:"dropdown"},{default:()=>[W(n("div",{class:"i-select-dropdown",style:d.value},[P(u,"default")]),[[q,o.value]])]})]})])}}});const wt={value:{type:Z},label:{type:[Function,String]}};function bt(e){const t=F(Ie),l=F(Se),o=F(De),s=A(()=>{var u;return e.value==((u=t==null?void 0:t.value)==null?void 0:u.value)}),i=A(()=>{var f;let u=e.label;return typeof u=="function"&&(u=(f=u(e.value))!=null?f:e.value),{key:u,value:e.value}});if(l){const u=l(i);we(u)}function r(){t&&(t.value=i.value)}ee(i,(u,f)=>{t&&f.value==o.value&&(t.value=u)});const d=A(()=>{var u,f;return[(f=(u=F(_e))==null?void 0:u.value)!=null?f:""].concat(s.value?p.value:b.value)}),p=A(()=>{var u,f;return(f=(u=F(Ee))==null?void 0:u.value)!=null?f:"active"}),b=A(()=>{var u,f;return(f=(u=F(Me))==null?void 0:u.value)!=null?f:"unactive"});return{change:r,active:t,isActive:s,current:i,activeClass:p,unactiveClass:b,itemClass:d}}var xt=V({name:"i-item",props:wt,setup(e,{slots:t}){const{itemClass:l,change:o,current:s}=bt(e);return()=>{var i;return n("div",{onClick:o,class:l.value},[(i=s.value.key)!=null?i:P(t,"default")])}}}),Ve=V({name:"i-selection",props:Be,setup(e,t){je(e,t);const{slots:l}=t;return()=>n("div",null,[P(l,"default")])}});function kt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!nt(e)}var Ct=V({name:"i-indices",components:{ISelection:Ve},props:{modelValue:{type:Z},label:{type:String}},setup(e,{slots:t,emit:l}){const o=ie(e,"modelValue",l);return()=>{let s;return n(g("i-selection"),{modelValue:o.value,"onUpdate:modelValue":i=>o.value=i,class:"flex flex-wrap","active-class":"text-white bg-primary-72 hover:bg-primary-62 rounded-1","unactive-class":"text-dark hover:bg-primary hover:text-primary hover:bg-primary-12","item-class":"mr-2 px-2 text-center h-8 leading-8 duration-300 cursor-pointer"},kt(s=P(t,"default"))?s:{default:()=>[s]})}}}),Rt=V({name:"i-input",props:{modelValue:{type:String},placeholder:{type:String},multiline:{type:Boolean,default:!1}},setup(e,{emit:t}){const l=A({get(){var i;return(i=e.modelValue)!=null?i:""},set(i){t("update:modelValue",i)}});function o(i){var d;const r=i.target;r&&(l.value=(d=r.textContent)!=null?d:"")}const s="bg-light border-solid rounded-md outline-none  border-1 border-hex-c0c0c0 h-7 text-xs text-dark py-1 px-2 w-50 i-input box-border focus:border-primary focus:text-primary";return()=>e.multiline?n("div",{contenteditable:!0,class:s,placeholder:e.placeholder,textContent:l.value,onInput:o},null):W(n("input",{class:s,placeholder:e.placeholder,"onUpdate:modelValue":i=>l.value=i},null),[[lt,l.value]])}});function It(e="body",t){return ge(be,{to:e},t)}var St=V({name:"i-dialog",components:{IButton:Re},props:{visible:{type:Boolean,default:!1},class:{type:String},yesButton:{type:[String,Boolean],default:"\u786E\u5B9A"},cancelButton:{type:[String,Boolean],default:"\u53D6\u6D88"},closeOnYes:{type:Boolean,default:()=>!0},closeOnCancel:{type:Boolean,default:()=>!0}},emits:["close","yes","cancel","update:visible"],setup(e,{emit:t,slots:l}){const o=w(),s=ie(e,"visible",t);Ae(o,()=>t("update:visible",!1));function i(){t("yes"),e.closeOnYes&&(s.value=!1)}function r(){t("cancel"),e.closeOnCancel&&(s.value=!1)}function d(){if(e.yesButton||e.cancelButton){const p=[];return e.cancelButton&&p.push(n(g("i-button"),{onClick:r},{default:()=>[e.cancelButton]})),e.yesButton&&p.push(n(g("i-button"),{type:"primary",onClick:i},{default:()=>[e.yesButton]})),n("div",{class:"flex mt-8 justify-end"},[p])}}return()=>It("body",[n(xe,{name:"dialog",mode:"out-in"},{default:()=>[W(n("div",{class:["dialog-mask bg-#00000066 w-full h-full fixed top-0 left-0 z-999 flex justify-center items-center duration-300 ease-in-out"]},[n("div",{ref:o,class:["bg-light h-auto shadow-sm round-1 p-4 dialog",e.class]},[n("div",{class:"w-full"},[n("div",{class:"h-auto"},[k(" "),P(l,"default")]),d()])])]),[[q,s.value]])]})])}});var Dt=Ce(St,[["__scopeId","data-v-6d00bcdd"]]),Et={install(e){e.component("apt-button",Re),e.component("apt-select",At),e.component("apt-selection",Ve),e.component("apt-item",xt),e.component("apt-indices",Ct),e.component("apt-input",Rt),e.component("apt-dialog",Dt)}};const te=st(ot);te.use(gt);te.use(dt);te.use(Et);te.mount("#app");
